<!DOCTYPE html>
<html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>kubernetes 部署cdh 通过 NASNFS）进行文件存储。 &mdash; 张建新</title>
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/vendor/primer-css/css/primer.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/vendor/primer-markdown/dist/user-content.min.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/vendor/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/components/collection.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/globals/common.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/vendor/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/globals/responsive.css">
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/posts/index.css">
    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="canonical" href="http://firsh.me/2018/09/20/kubernetes-cdh-deploy/">
    <link rel="alternate" type="application/atom+xml" title="张建新" href="/feed.xml">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <meta property="og:title" content="kubernetes 部署cdh 通过 NASNFS）进行文件存储。">
      
    <meta name="keywords" content="hadoop cdh kubernetes">
    <meta name="og:keywords" content="hadoop cdh kubernetes">
      
    <meta name="description" content="技术验证篇，通过Kubernetes搭建一个可扩展的 CDH，并且启动hadoop。">
    <meta name="og:description" content="技术验证篇，通过Kubernetes搭建一个可扩展的 CDH，并且启动hadoop。">
      
    
    
        
    
    <meta property="og:url" content="http://firsh.me/2018/09/20/kubernetes-cdh-deploy/">
    <meta property="og:site_name" content="张建新">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2018-09-20">
    
    <script src="https://zmatsh.b0.upaiyun.com/assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="https://zmatsh.b0.upaiyun.com/assets/js/jquery-ui.js"></script>
    <script type="text/javascript">
    function toggleMenu() {
        var nav = document.getElementsByClassName("site-header-nav")[0];
        if (nav.style.display == "inline-flex") {
          nav.style.display = "none";
        } else {
          nav.style.display = "inline-flex";
        }
    }
    </script>
</head>
<body class="" data-mz="">
    <header class="site-header">
        <div class="container">
            <h1><a href="/" title="张建新"><span class="octicon octicon-mark-github"></span> 张建新</a></h1>
            <button class="collapsed mobile-visible" type="button" onclick="toggleMenu();">
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <nav class="site-header-nav" role="navigation">
                
                <a href="/" class=" site-header-nav-item" target="" title="Index">Index</a>
                
                <a href="/categories/" class=" site-header-nav-item" target="" title="CATEGORIES">CATEGORIES</a>
                
                <a href="/open-source/" class=" site-header-nav-item" target="" title="OPEN-SOURCE">OPEN-SOURCE</a>
                
                <a href="/wiki/" class=" site-header-nav-item" target="" title="WIKI">WIKI</a>
                
                <a href="/links/" class=" site-header-nav-item" target="" title="LINKS">LINKS</a>
                
                <a href="/about/" class=" site-header-nav-item" target="" title="ABOUT">ABOUT</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->

    <section class="collection-head small geopattern" data-pattern-id="kubernetes 部署cd">
<div class="container">
  <div class="columns">
    <div class="column three-fourths">
      <div class="collection-title">
        <h1 class="collection-header">kubernetes 部署cdh 通过 NASNFS）进行文件存储。</h1>
        <div class="collection-info">
          
          <span class="meta-info">
            <span class="octicon octicon-calendar"></span> 2018/09/20
          </span>
          
          
          <span class="meta-info">
            <span class="octicon octicon-file-directory"></span>
            <a href="/categories/#cdh" title="cdh">cdh</a>
          </span>
          
        </div>
      </div>
    </div>
  </div>
</div>
</section>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-3969253077255521",
        enable_page_level_ads: true
    });
</script>
<!-- / .banner -->
<section class="container content">
<div class="columns">
  <div class="column three-fourths" >
    <article class="article-content markdown-body">
    <p>技术验证篇，通过Kubernetes搭建一个可扩展的 CDH，并且启动hadoop。</p>

<h2 id="quick">Quick</h2>

<ul>
  <li>主要用到<code class="highlighter-rouge">Kubernetes</code> 阿里云</li>
  <li>镜像来源 <code class="highlighter-rouge">https://github.com/windawings/spot-docker</code> .</li>
  <li>启动文件.<code class="highlighter-rouge">yaml</code>文件</li>
  <li>NAS 阿里云弹性存储 NAS</li>
</ul>

<h2 id="注意">注意</h2>
<ul>
  <li>NAS 需要开启<code class="highlighter-rouge">VPC</code>网络安全组</li>
  <li>镜像需要上传到自己的私有仓库</li>
  <li>
    <p>Kubernetes 下载镜像需要配置<code class="highlighter-rouge">yaml &lt;&lt; imagePullSecrets</code>,文章结尾会将<code class="highlighter-rouge">yaml</code>奉上</p>
  </li>
  <li>Kubernetes默认会创建一个<code class="highlighter-rouge">SLB</code>（用来给Ingress 使用)，我们用来暴露CDH的<code class="highlighter-rouge">UI</code>就是需要采用 <code class="highlighter-rouge">Ingress</code> 来进行暴露。</li>
  <li><code class="highlighter-rouge">Ingress</code> 所在 <code class="highlighter-rouge">Namespace = kube-system</code></li>
</ul>

<p><img src="http://zmatsh.b0.upaiyun.com/demos/17612368-36b7-49c3-bcbd-6bd7848c849a.png" alt="" /></p>

<ul>
  <li>域名解析 注意是<code class="highlighter-rouge">泛域名</code></li>
</ul>

<h2 id="开始部署">开始部署</h2>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="nn">---</span>
<span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-sa</span>
  <span class="s">namespace</span><span class="pi">:</span> <span class="s">cloudera</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">sa</span>
    <span class="s">app</span><span class="pi">:</span> <span class="s">cloudera</span>
<span class="s">automountServiceAccountToken</span><span class="pi">:</span> <span class="s">true</span>
<span class="nn">---</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="s">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">namespace</span><span class="pi">:</span> <span class="s">cloudera</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-cr</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">cr</span>
    <span class="s">app</span><span class="pi">:</span> <span class="s">cloudera</span>
<span class="s">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">apiGroups</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
  <span class="s">resources</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
  <span class="s">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
<span class="pi">-</span> <span class="s">nonResourceURLs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
  <span class="s">verbs</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">*"</span><span class="pi">]</span>
<span class="nn">---</span>
<span class="s">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-crb</span>
  <span class="s">namespace</span><span class="pi">:</span> <span class="s">cloudera</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">crb</span>
    <span class="s">app</span><span class="pi">:</span> <span class="s">cloudera</span>
<span class="s">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-sa</span>
  <span class="s">namespace</span><span class="pi">:</span> <span class="s">cloudera</span>
<span class="s">roleRef</span><span class="pi">:</span>
  <span class="s">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-cr</span>
  <span class="s">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
<span class="nn">---</span>
<span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-config</span>
  <span class="s">namespace</span><span class="pi">:</span> <span class="s">cloudera</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">cloudera-config</span>
    <span class="s">app</span><span class="pi">:</span> <span class="s">cloudera</span>
<span class="s">data</span><span class="pi">:</span>
  <span class="s">master_host</span><span class="pi">:</span> <span class="s">master-svc</span>
  <span class="s">cron.tab</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="no">*/30 * * * * ntpdate master-svc &amp;&amp; hwclock --systohc</span>

  <span class="s">config.ini</span><span class="pi">:</span> <span class="pi">|-</span>
    <span class="no">[General]</span>
    <span class="no"># Hostname of the CM server.</span>
    <span class="no">server_host=master-svc</span>

    <span class="no"># Port that the CM server is listening on.</span>
    <span class="no">server_port=7182</span>

    <span class="no">## It should not normally be necessary to modify these.</span>
    <span class="no"># Port that the CM agent should listen on.</span>
    <span class="no"># listening_port=9000</span>

    <span class="no"># IP Address that the CM agent should listen on.</span>
    <span class="no"># listening_ip=</span>

    <span class="no"># Hostname that the CM agent reports as its hostname. If unset, will be</span>
    <span class="no"># obtained in code through something like this:</span>
    <span class="no">#</span>
    <span class="no">#   python -c 'import socket; \</span>
    <span class="no">#              print socket.getfqdn(), \</span>
    <span class="no">#                    socket.gethostbyname(socket.getfqdn())'</span>
    <span class="no">#</span>
    <span class="no"># listening_hostname=</span>

    <span class="no"># An alternate hostname to report as the hostname for this host in CM.</span>
    <span class="no"># Useful when this agent is behind a load balancer or proxy and all</span>
    <span class="no"># inbound communication must connect through that proxy.</span>
    <span class="no"># reported_hostname=</span>

    <span class="no"># Port that supervisord should listen on.</span>
    <span class="no"># NB: This only takes effect if supervisord is restarted.</span>
    <span class="no"># supervisord_port=19001</span>

    <span class="no"># Log file.  The supervisord log file will be placed into</span>
    <span class="no"># the same directory.  Note that if the agent is being started via the</span>
    <span class="no"># init.d script, /var/log/cloudera-scm-agent/cloudera-scm-agent.out will</span>
    <span class="no"># also have a small amount of output (from before logging is initialized).</span>
    <span class="no"># log_file=/var/log/cloudera-scm-agent/cloudera-scm-agent.log</span>

    <span class="no"># Persistent state directory.  Directory to store CM agent state that</span>
    <span class="no"># persists across instances of the agent process and system reboots.</span>
    <span class="no"># Particularly, the agent's UUID is stored here.</span>
    <span class="no"># lib_dir=/var/lib/cloudera-scm-agent</span>

    <span class="no"># Parcel directory.  Unpacked parcels will be stored in this directory.</span>
    <span class="no"># Downloaded parcels will be stored in &lt;parcel_dir&gt;/../parcel-cache</span>
    <span class="no"># parcel_dir=/opt/cloudera/parcels</span>

    <span class="no"># Enable supervisord event monitoring.  Used in eager heartbeating, amongst</span>
    <span class="no"># other things.</span>
    <span class="no"># enable_supervisord_events=true</span>

    <span class="no"># Maximum time to wait (in seconds) for all metric collectors to finish</span>
    <span class="no"># collecting data.</span>
    <span class="no">max_collection_wait_seconds=10.0</span>

    <span class="no"># Maximum time to wait (in seconds) when connecting to a local role's</span>
    <span class="no"># webserver to fetch metrics.</span>
    <span class="no">metrics_url_timeout_seconds=30.0</span>

    <span class="no"># Maximum time to wait (in seconds) when connecting to a local TaskTracker</span>
    <span class="no"># to fetch task attempt data.</span>
    <span class="no">task_metrics_timeout_seconds=5.0</span>

    <span class="no"># The list of non-device (nodev) filesystem types which will be monitored.</span>
    <span class="no">monitored_nodev_filesystem_types=nfs,nfs4,tmpfs</span>

    <span class="no"># The list of filesystem types which are considered local for monitoring purposes.</span>
    <span class="no"># These filesystems are combined with the other local filesystem types found in</span>
    <span class="no"># /proc/filesystems</span>
    <span class="no">local_filesystem_whitelist=ext2,ext3,ext4,xfs</span>

    <span class="no"># The largest size impala profile log bundle that this agent will serve to the</span>
    <span class="no"># CM server. If the CM server requests more than this amount, the bundle will</span>
    <span class="no"># be limited to this size. All instances of this limit being hit are logged to</span>
    <span class="no"># the agent log.</span>
    <span class="no">impala_profile_bundle_max_bytes=1073741824</span>

    <span class="no"># The largest size stacks log bundle that this agent will serve to the CM</span>
    <span class="no"># server. If the CM server requests more than this amount, the bundle will be</span>
    <span class="no"># limited to this size. All instances of this limit being hit are logged to the</span>
    <span class="no"># agent log.</span>
    <span class="no">stacks_log_bundle_max_bytes=1073741824</span>

    <span class="no"># The size to which the uncompressed portion of a stacks log can grow before it</span>
    <span class="no"># is rotated. The log will then be compressed during rotation.</span>
    <span class="no">stacks_log_max_uncompressed_file_size_bytes=5242880</span>

    <span class="no"># The orphan process directory staleness threshold. If a diretory is more stale</span>
    <span class="no"># than this amount of seconds, CM agent will remove it.</span>
    <span class="no">orphan_process_dir_staleness_threshold=5184000</span>

    <span class="no"># The orphan process directory refresh interval. The CM agent will check the</span>
    <span class="no"># staleness of the orphan processes config directory every this amount of</span>
    <span class="no"># seconds.</span>
    <span class="no">orphan_process_dir_refresh_interval=3600</span>

    <span class="no"># A knob to control the agent logging level. The options are listed as follows:</span>
    <span class="no"># 1) DEBUG (set the agent logging level to 'logging.DEBUG')</span>
    <span class="no"># 2) INFO (set the agent logging level to 'logging.INFO')</span>
    <span class="no">scm_debug=INFO</span>

    <span class="no"># The DNS resolution collecion interval in seconds. A java base test program</span>
    <span class="no"># will be executed with at most this frequency to collect java DNS resolution</span>
    <span class="no"># metrics. The test program is only executed if the associated health test,</span>
    <span class="no"># Host DNS Resolution, is enabled.</span>
    <span class="no">dns_resolution_collection_interval_seconds=60</span>

    <span class="no"># The maximum time to wait (in seconds) for the java test program to collect</span>
    <span class="no"># java DNS resolution metrics.</span>
    <span class="no">dns_resolution_collection_timeout_seconds=30</span>

    <span class="no"># The directory location in which the agent-wide kerberos credential cache</span>
    <span class="no"># will be created.</span>
    <span class="no"># agent_wide_credential_cache_location=/var/run/cloudera-scm-agent</span>

    <span class="no">[Security]</span>
    <span class="no"># Use TLS and certificate validation when connecting to the CM server.</span>
    <span class="no">use_tls=0</span>

    <span class="no"># The maximum allowed depth of the certificate chain returned by the peer.</span>
    <span class="no"># The default value of 9 matches the default specified in openssl's</span>
    <span class="no"># SSL_CTX_set_verify.</span>
    <span class="no">max_cert_depth=9</span>

    <span class="no"># A file of CA certificates in PEM format. The file can contain several CA</span>
    <span class="no"># certificates identified by</span>
    <span class="no">#</span>
    <span class="no"># -----BEGIN CERTIFICATE-----</span>
    <span class="no"># ... (CA certificate in base64 encoding) ...</span>
    <span class="no"># -----END CERTIFICATE-----</span>
    <span class="no">#</span>
    <span class="no"># sequences. Before, between, and after the certificates text is allowed which</span>
    <span class="no"># can be used e.g. for descriptions of the certificates.</span>
    <span class="no">#</span>
    <span class="no"># The file is loaded once, the first time an HTTPS connection is attempted. A</span>
    <span class="no"># restart of the agent is required to pick up changes to the file.</span>
    <span class="no">#</span>
    <span class="no"># Note that if neither verify_cert_file or verify_cert_dir is set, certificate</span>
    <span class="no"># verification will not be performed.</span>
    <span class="no"># verify_cert_file=</span>

    <span class="no"># Directory containing CA certificates in PEM format. The files each contain one</span>
    <span class="no"># CA certificate. The files are looked up by the CA subject name hash value,</span>
    <span class="no"># which must hence be available. If more than one CA certificate with the same</span>
    <span class="no"># name hash value exist, the extension must be different (e.g. 9d66eef0.0,</span>
    <span class="no"># 9d66eef0.1 etc). The search is performed in the ordering of the extension</span>
    <span class="no"># number, regardless of other properties of the certificates. Use the c_rehash</span>
    <span class="no"># utility to create the necessary links.</span>
    <span class="no">#</span>
    <span class="no"># The certificates in the directory are only looked up when required, e.g. when</span>
    <span class="no"># building the certificate chain or when actually performing the verification</span>
    <span class="no"># of a peer certificate. The contents of the directory can thus be changed</span>
    <span class="no"># without an agent restart.</span>
    <span class="no">#</span>
    <span class="no"># When looking up CA certificates, the verify_cert_file is first searched, then</span>
    <span class="no"># those in the directory. Certificate matching is done based on the subject name,</span>
    <span class="no"># the key identifier (if present), and the serial number as taken from the</span>
    <span class="no"># certificate to be verified. If these data do not match, the next certificate</span>
    <span class="no"># will be tried. If a first certificate matching the parameters is found, the</span>
    <span class="no"># verification process will be performed; no other certificates for the same</span>
    <span class="no"># parameters will be searched in case of failure.</span>
    <span class="no">#</span>
    <span class="no"># Note that if neither verify_cert_file or verify_cert_dir is set, certificate</span>
    <span class="no"># verification will not be performed.</span>
    <span class="no"># verify_cert_dir=</span>

    <span class="no"># PEM file containing client private key.</span>
    <span class="no"># client_key_file=</span>

    <span class="no"># A command to run which returns the client private key password on stdout</span>
    <span class="no"># client_keypw_cmd=</span>

    <span class="no"># If client_keypw_cmd isn't specified, instead a text file containing</span>
    <span class="no"># the client private key password can be used.</span>
    <span class="no"># client_keypw_file=</span>

    <span class="no"># PEM file containing client certificate.</span>
    <span class="no"># client_cert_file=</span>

    <span class="no">## Location of Hadoop files.  These are the CDH locations when installed by</span>
    <span class="no">## packages.  Unused when CDH is installed by parcels.</span>
    <span class="no">[Hadoop]</span>
    <span class="no">#cdh_crunch_home=/usr/lib/crunch</span>
    <span class="no">#cdh_flume_home=/usr/lib/flume-ng</span>
    <span class="no">#cdh_hadoop_bin=/usr/bin/hadoop</span>
    <span class="no">#cdh_hadoop_home=/usr/lib/hadoop</span>
    <span class="no">#cdh_hbase_home=/usr/lib/hbase</span>
    <span class="no">#cdh_hbase_indexer_home=/usr/lib/hbase-solr</span>
    <span class="no">#cdh_hcat_home=/usr/lib/hive-hcatalog</span>
    <span class="no">#cdh_hdfs_home=/usr/lib/hadoop-hdfs</span>
    <span class="no">#cdh_hive_home=/usr/lib/hive</span>
    <span class="no">#cdh_httpfs_home=/usr/lib/hadoop-httpfs</span>
    <span class="no">#cdh_hue_home=/usr/share/hue</span>
    <span class="no">#cdh_hue_plugins_home=/usr/lib/hadoop</span>
    <span class="no">#cdh_impala_home=/usr/lib/impala</span>
    <span class="no">#cdh_llama_home=/usr/lib/llama</span>
    <span class="no">#cdh_mr1_home=/usr/lib/hadoop-0.20-mapreduce</span>
    <span class="no">#cdh_mr2_home=/usr/lib/hadoop-mapreduce</span>
    <span class="no">#cdh_oozie_home=/usr/lib/oozie</span>
    <span class="no">#cdh_parquet_home=/usr/lib/parquet</span>
    <span class="no">#cdh_pig_home=/usr/lib/pig</span>
    <span class="no">#cdh_solr_home=/usr/lib/solr</span>
    <span class="no">#cdh_spark_home=/usr/lib/spark</span>
    <span class="no">#cdh_sqoop_home=/usr/lib/sqoop</span>
    <span class="no">#cdh_sqoop2_home=/usr/lib/sqoop2</span>
    <span class="no">#cdh_yarn_home=/usr/lib/hadoop-yarn</span>
    <span class="no">#cdh_zookeeper_home=/usr/lib/zookeeper</span>
    <span class="no">#hive_default_xml=/etc/hive/conf.dist/hive-default.xml</span>
    <span class="no">#webhcat_default_xml=/etc/hive-webhcat/conf.dist/webhcat-default.xml</span>
    <span class="no">#jsvc_home=/usr/libexec/bigtop-utils</span>
    <span class="no">#tomcat_home=/usr/lib/bigtop-tomcat</span>
    <span class="no">#oracle_home=/usr/share/oracle/instantclient</span>

    <span class="no">## Location of Cloudera Management Services files.</span>
    <span class="no">[Cloudera]</span>
    <span class="no">#mgmt_home=/usr/share/cmf</span>

    <span class="no">## Location of JDBC Drivers.</span>
    <span class="no">[JDBC]</span>
    <span class="no">cloudera_mysql_connector_jar=/usr/java/latest/mysql-connector-java.jar</span>
    <span class="no">#cloudera_oracle_connector_jar=/usr/share/java/oracle-connector-java.jar</span>
    <span class="no">#By default, postgres jar is found dynamically in $MGMT_HOME/lib</span>
    <span class="no">#cloudera_postgresql_jdbc_jar=</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: apps/v1</span>
<span class="err">k</span><span class="no">ind: Deployment</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: nfs-deploy</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: nfs</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
  <span class="no">replicas: 1</span>
  <span class="no">revisionHistoryLimit: 2</span>
  <span class="no">selector:</span>
    <span class="no">matchLabels:</span>
      <span class="no">name: nfs</span>
      <span class="no">app: cloudera</span>
  <span class="no">template:</span>
    <span class="no">metadata:</span>
      <span class="no">name: nfs-client</span>
      <span class="no">namespace: cloudera</span>
      <span class="no">labels:</span>
        <span class="no">name: nfs</span>
        <span class="no">app: cloudera</span>
    <span class="no">spec:</span>
      <span class="no">tolerations:</span>
      <span class="no">- key: node-role.kubernetes.io/master</span>
        <span class="no">effect: NoSchedule</span>
      <span class="no">serviceAccountName: cloudera-sa</span>
      <span class="no">containers:</span>
      <span class="no">- image: registry.cn-hangzhou.aliyuncs.com/acs/alicloud-nas-controller:v1.8.4</span>
<span class="err">#</span><span class="no">        imagePullPolicy: Never</span>
        <span class="no">name: nfs-client</span>
<span class="err">#</span><span class="no">        securityContext:</span>
<span class="err">#</span><span class="no">          privileged: true</span>
        <span class="no">volumeMounts:</span>
        <span class="no">- name: nfs-client-root</span>
          <span class="no">mountPath: /persistentvolumes</span>
        <span class="no">env:</span>
        <span class="no">- name: PROVISIONER_NAME</span>
          <span class="no">value: alicloud/nas</span>
        <span class="no">- name: NFS_SERVER</span>
          <span class="no">value: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com</span>
        <span class="no">- name: NFS_PATH</span>
          <span class="no">value: /pv/cloudera/agent/</span>
      <span class="no">volumes:</span>
      <span class="no">- name: nfs-client-root</span>
        <span class="no">nfs:</span>
          <span class="no">server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com</span>
          <span class="no">path: /pv/cloudera/agent/</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: storage.k8s.io/v1</span>
<span class="err">k</span><span class="no">ind: StorageClass</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: cloudera-storage</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: storage</span>
    <span class="no">app: cloudera</span>
<span class="err">r</span><span class="no">eclaimPolicy: Delete</span>
<span class="err">p</span><span class="no">rovisioner: alicloud/nas</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: apps/v1</span>
<span class="err">k</span><span class="no">ind: Deployment</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: master-deploy</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: master-deploy</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
  <span class="no">replicas: 1</span>
  <span class="no">revisionHistoryLimit: 2</span>
  <span class="no">selector:</span>
    <span class="no">matchLabels:</span>
      <span class="no">name: master</span>
      <span class="no">app: cloudera</span>
  <span class="no">template:</span>
    <span class="no">metadata:</span>
      <span class="no">name: master</span>
      <span class="no">namespace: cloudera</span>
      <span class="no">labels:</span>
        <span class="no">name: master</span>
        <span class="no">app: cloudera</span>
    <span class="no">spec:</span>
      <span class="no">tolerations:</span>
      <span class="no">- effect: NoSchedule</span>
        <span class="no">key: node-role.kubernetes.io/master</span>
      <span class="no">restartPolicy: Always</span>
      <span class="no">serviceAccountName: cloudera-sa</span>
      <span class="no">automountServiceAccountToken: true</span>
      <span class="no">hostname: master-svc</span>
      <span class="no">containers:</span>
      <span class="no">- name: cloudera-master</span>
        <span class="no">image: registry-vpc.cn-hangzhou.aliyuncs.com/huaching_prod/cloudera-master:5.14.2</span>
<span class="err">#</span><span class="no">        imagePullPolicy: IfNotPresent</span>
        <span class="no">resources:</span>
          <span class="no">limits:</span>
            <span class="no">memory: "4096Mi"</span>
            <span class="no">cpu: "1000m"</span>
        <span class="no">lifecycle:</span>
          <span class="no">preStop:</span>
            <span class="no">exec:</span>
              <span class="no">command: ["/bin/bash","-c","/cloudera-init/run/stop.sh &gt;&gt; /cloudera/log/stop.log 2&gt;&amp;1"]</span>
        <span class="no">volumeMounts:</span>
        <span class="no">#- name: cloudera-init</span>
          <span class="no">#mountPath: /cloudera-init/run/</span>
        <span class="no">- name: mysql</span>
          <span class="no">mountPath: /var/lib/mysql/</span>
        <span class="no">- name: repo</span>
          <span class="no">mountPath: /opt/cloudera/parcel-repo/</span>
        <span class="no">- name: config</span>
          <span class="no">mountPath: /opt/cm/etc/cloudera-scm-agent/</span>
        <span class="no">env:</span>
        <span class="no">- name: HOSTNAME</span>
          <span class="no">valueFrom:</span>
            <span class="no">configMapKeyRef:</span>
              <span class="no">name: cloudera-config</span>
              <span class="no">key: master_host</span>
        <span class="no">- name: POD_IP</span>
          <span class="no">valueFrom:</span>
            <span class="no">fieldRef:</span>
              <span class="no">apiVersion: v1</span>
              <span class="no">fieldPath: status.podIP</span>
        <span class="no">- name: POD_NAME</span>
          <span class="no">valueFrom:</span>
            <span class="no">fieldRef:</span>
              <span class="no">apiVersion: v1</span>
              <span class="no">fieldPath: metadata.name</span>
        <span class="no">ports:</span>
        <span class="no">- containerPort: 7180</span>
          <span class="no">name: ui</span>
        <span class="no">- containerPort: 9000</span>
          <span class="no">name: agent</span>
        <span class="no">- containerPort: 7182</span>
          <span class="no">name: server</span>
        <span class="no">- containerPort: 7191</span>
          <span class="no">name: parcel</span>
        <span class="no">- containerPort: 4434</span>
          <span class="no">name: parcel-ssl</span>
        <span class="no">securityContext:</span>
          <span class="no">privileged: true</span>
      <span class="no">imagePullSecrets:</span>
      <span class="no">- name: registrykey-vpc</span>
      <span class="no">volumes:</span>
      <span class="no">- name: repo</span>
        <span class="no">nfs:</span>
          <span class="no">server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com</span>
          <span class="no">path: /pv/cloudera/repo/</span>
      <span class="no">- name: mysql</span>
        <span class="no">nfs:</span>
          <span class="no">server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com</span>
          <span class="no">path: /pv/cloudera/master/</span>
      <span class="no">#- name: cloudera-init</span>
        <span class="no">#configMap:</span>
          <span class="no">#name: cloudera-config</span>
          <span class="no">#defaultMode: 0751</span>
          <span class="no">#items:</span>
          <span class="no">#- key: master.start</span>
            <span class="no">#path: start.sh</span>
          <span class="no">#- key: master.stop</span>
            <span class="no">#path: stop.sh</span>
          <span class="no">#- key: mysql.sql</span>
            <span class="no">#path: mysql.sql</span>
      <span class="no">- name: config</span>
        <span class="no">configMap:</span>
          <span class="no">name: cloudera-config</span>
          <span class="no">items:</span>
          <span class="no">- key: config.ini</span>
            <span class="no">path: config.ini</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: v1</span>
<span class="err">k</span><span class="no">ind: Service</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: master-svc</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: master-svc</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
    <span class="no">type: ClusterIP</span>
    <span class="no">clusterIP: None</span>
    <span class="no">ports:</span>
    <span class="no">- name: agent</span>
      <span class="no">port: 9000</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 9000</span>
    <span class="no">- name: server</span>
      <span class="no">port: 7182</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7182</span>
    <span class="no">- name: parcel</span>
      <span class="no">port: 7191</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7191</span>
    <span class="no">- name: parcel-ssl</span>
      <span class="no">port: 4434</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 4434</span>
    <span class="no">- name: ui</span>
      <span class="no">port: 7180</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7180</span>
    <span class="no">selector:</span>
        <span class="no">name: master</span>
        <span class="no">app: cloudera</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: v1</span>
<span class="err">k</span><span class="no">ind: Service</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: master-external</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: master-external</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
    <span class="no">type: ClusterIP</span>
    <span class="no">ports:</span>
    <span class="no">- name: ui</span>
      <span class="no">port: 7180</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7180</span>
    <span class="no">selector:</span>
        <span class="no">name: master</span>
        <span class="no">app: cloudera</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: policy/v1beta1</span>
<span class="err">k</span><span class="no">ind: PodDisruptionBudget</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: agent-pdb</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: agent-pdb</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
  <span class="no">selector:</span>
    <span class="no">matchLabels:</span>
      <span class="no">name: agent</span>
      <span class="no">app: cloudera</span>
  <span class="no">maxUnavailable: 1</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: v1</span>
<span class="err">k</span><span class="no">ind: Service</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: agent-svc</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: agent-svc</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
    <span class="no">type: ClusterIP</span>
    <span class="no">clusterIP: None</span>
    <span class="no">ports:</span>
    <span class="no">- name: agent</span>
      <span class="no">port: 9000</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 9000</span>
    <span class="no">- name: server</span>
      <span class="no">port: 7182</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7182</span>
    <span class="no">- name: parcel</span>
      <span class="no">port: 7191</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 7191</span>
    <span class="no">- name: parcel-ssl</span>
      <span class="no">port: 4434</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 4434</span>
    <span class="no">- name: parcel-ssl2</span>
      <span class="no">port: 4433</span>
      <span class="no">protocol: TCP</span>
      <span class="no">targetPort: 4433</span>
    <span class="no">selector:</span>
        <span class="no">name: agent</span>
        <span class="no">app: cloudera</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: apps/v1</span>
<span class="err">k</span><span class="no">ind: StatefulSet</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: agent</span>
  <span class="no">namespace: cloudera</span>
  <span class="no">labels:</span>
    <span class="no">name: agent-sts</span>
    <span class="no">app: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
  <span class="no">selector:</span>
    <span class="no">matchLabels:</span>
      <span class="no">name: agent</span>
      <span class="no">app: cloudera</span>
  <span class="no">serviceName: agent-svc</span>
  <span class="no">updateStrategy:</span>
    <span class="no">type: RollingUpdate</span>
  <span class="no">podManagementPolicy: OrderedReady</span>
  <span class="no">replicas: 3</span>
  <span class="no">revisionHistoryLimit: 2</span>
  <span class="no">template:</span>
    <span class="no">metadata:</span>
      <span class="no">name: cagent</span>
      <span class="no">namespace: cloudera</span>
      <span class="no">labels:</span>
        <span class="no">name: agent</span>
        <span class="no">app: cloudera</span>
    <span class="no">spec:</span>
      <span class="no">tolerations:</span>
      <span class="no">- effect: NoSchedule</span>
        <span class="no">key: node-role.kubernetes.io/master</span>
      <span class="no">restartPolicy: Always</span>
      <span class="no">serviceAccountName: cloudera-sa</span>
      <span class="no">automountServiceAccountToken: true</span>
      <span class="no">containers:</span>
      <span class="no">- name: agent</span>
        <span class="no">image: registry-vpc.cn-hangzhou.aliyuncs.com/huaching_prod/cloudera-node:5.14.2</span>
<span class="err">#</span><span class="no">        imagePullPolicy: IfNotPresent</span>
        <span class="no">resources:</span>
          <span class="no">limits:</span>
            <span class="no">memory: "4096Mi"</span>
            <span class="no">cpu: "1000m"</span>
        <span class="no">lifecycle:</span>
          <span class="no">preStop:</span>
            <span class="no">exec:</span>
              <span class="no">command: ["/bin/bash","-c","/cloudera-init/run/stop.sh"]</span>
        <span class="no">volumeMounts:</span>
        <span class="no">- name: repo</span>
          <span class="no">mountPath: /opt/cloudera/parcel-repo/</span>
        <span class="no">- name: lib</span>
          <span class="no">mountPath: /opt/cm/lib/cloudera-scm-agent/</span>
        <span class="no">- name: config</span>
          <span class="no">mountPath: /opt/cm/etc/cloudera-scm-agent/</span>
        <span class="no">ports:</span>
        <span class="no">- containerPort: 9000</span>
          <span class="no">name: agent</span>
        <span class="no">- containerPort: 7182</span>
          <span class="no">name: server</span>
        <span class="no">- containerPort: 7191</span>
          <span class="no">name: parcel</span>
        <span class="no">- containerPort: 4434</span>
          <span class="no">name: parcel-ssl</span>
        <span class="no">- containerPort: 4433</span>
          <span class="no">name: parcel-ssl2</span>
        <span class="no">securityContext:</span>
          <span class="no">privileged: true</span>
      <span class="no">imagePullSecrets:</span>
      <span class="no">- name: registrykey-vpc</span>
      <span class="no">volumes:</span>
      <span class="no">- name: config</span>
        <span class="no">configMap:</span>
          <span class="no">name: cloudera-config</span>
          <span class="no">items:</span>
          <span class="no">- key: config.ini</span>
            <span class="no">path: config.ini</span>
          <span class="no">- key: cron.tab</span>
            <span class="no">path: cron.tab</span>
      <span class="no">- name: repo</span>
        <span class="no">nfs:</span>
          <span class="no">server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com</span>
          <span class="no">path: /pv/cloudera/repo/</span>
  <span class="no">volumeClaimTemplates:</span>
  <span class="no">- metadata:</span>
      <span class="no">name: lib</span>
      <span class="no">namespace: cloudera</span>
    <span class="no">spec:</span>
      <span class="no">#volumeName: lib</span>
      <span class="no">volumeMode: Filesystem</span>
      <span class="no">accessModes: [ "ReadWriteOnce" ]</span>
      <span class="no">storageClassName: cloudera-storage</span>
      <span class="no">resources:</span>
        <span class="no">requests:</span>
          <span class="no">storage: 20Gi</span>
<span class="err">-</span><span class="no">--</span>
<span class="err">a</span><span class="no">piVersion: extensions/v1beta1</span>
<span class="err">k</span><span class="no">ind: Ingress</span>
<span class="err">m</span><span class="no">etadata:</span>
  <span class="no">name: cdh-master-ing</span>
  <span class="no">namespace: cloudera</span>
<span class="err">s</span><span class="no">pec:</span>
  <span class="no">rules:</span>
  <span class="no">- host: cdh.docs.aliyun.com</span>
    <span class="no">http:</span>
      <span class="no">paths:</span>
      <span class="no">- backend:</span>
          <span class="no">serviceName: master-external</span>
          <span class="no">servicePort: 7180</span>

</code></pre>
</div>

<h2 id="注意事项">注意事项</h2>
<ul>
  <li>创建<code class="highlighter-rouge">namespace cloudera</code></li>
  <li>镜像来源已经在上方说明了,可以自己去<code class="highlighter-rouge">rebuild</code></li>
  <li>默认全部不会启动<code class="highlighter-rouge">command脚本可以看出</code></li>
  <li>启动流程进入<code class="highlighter-rouge">Master-deploy </code> 去执行<code class="highlighter-rouge">start.sh</code>启动，根据机器情况，启动时间不等，期间可以用<code class="highlighter-rouge">netstat -tlunp</code> 查看端口是否占用来验证启动成功与否.</li>
  <li><code class="highlighter-rouge">CDH</code> 需要用到Kubernetes的<code class="highlighter-rouge">特权模式</code>,相关细节请查关键字 <code class="highlighter-rouge">Kubernetes securityContext</code></li>
  <li>
    <p>部分界面如下：
<img src="http://zmatsh.b0.upaiyun.com/demos/2f2be0a5-ef33-4458-9cd4-433b9a3ebed4.png" alt="" /></p>
  </li>
  <li>
    <p>服务界面</p>

    <p><img src="http://zmatsh.b0.upaiyun.com/demos/3596a98d-8de0-4641-b2b6-e7904061479d.png" alt="" /></p>
  </li>
  <li>
    <p>PVC 界面</p>

    <p><img src="http://zmatsh.b0.upaiyun.com/demos/e68c1177-32c0-419b-8acd-eeecbfd702dc.png" alt="" /></p>
  </li>
  <li>
    <p>CDH 节点界面</p>

    <p><img src="http://zmatsh.b0.upaiyun.com/demos/49f7fc4a-2f25-4895-818a-0e6d296983b0.png" alt="" /></p>
  </li>
  <li>节点服务运行情况。
  <img src="http://zmatsh.b0.upaiyun.com/demos/a054ea06-ffcb-4340-bfc9-7b307d7cbc99.png" alt="" /></li>
</ul>

<h3 id="感谢-httpsgithubcomwindawings">感谢 https://github.com/windawings</h3>

<p>转载请注明出处，本文采用 <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/">CC4.0</a> 协议授权</p>

    </article>
    <div class="share">
      <div class="share-component"></div>
    </div>
    <div class="comment">
      
  
      
        
        <!-- Disqus Protection, see https://github.com/mzlogin/mzlogin.github.io/issues/2 -->
        
        
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page.url = 'http://firsh.me/2018/09/20/kubernetes-cdh-deploy/';
              this.page.identifier = '/2018/09/20/kubernetes-cdh-deploy/';
              this.page.title = 'kubernetes 部署cdh 通过 NASNFS）进行文件存储。';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');

              s.type = 'text/javascript';
              s.async = true;
              var shortname = 'zmatsh';

              s.src = '//' + shortname + '.disqus.com/embed.js';

              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
        
        
      
    


    </div>
  </div>
  <div class="column one-fourth">
    
<h3>Search</h3>
<div id="site_search">
    <input type="text" id="search_box" placeholder="Search">
    <button class="btn btn-default" id="site_search_do"><span class="octicon octicon-search"></span></button>
</div>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="https://zmatsh.b0.upaiyun.com/assets/css/modules/sidebar-search.css">
<script src="https://zmatsh.b0.upaiyun.com/assets/js/lunr.min.js"></script>
<script src="https://zmatsh.b0.upaiyun.com/assets/js/search.js"></script>


    
<h3>Post Directory</h3>
<div id="post-directory-module" class="mobile-hidden">
  <section class="post-directory">
  <!-- Links that trigger the jumping -->
  <!-- Added by javascript below -->
  <dl></dl>
  </section>
</div>
<script src="https://zmatsh.b0.upaiyun.com/assets/js/jquery.toc.js"></script>

  </div>
</div>
</section>
<!-- /section.content -->

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="unknow :)">unknow :)</span>
                    <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:window.scrollTo(0,0)" >TOP</a>
                </li>
            </ul>
            <a href="http://github.com/uk0/uk0.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="/" title="Index" target="">Index</a>
                </li>
                
                <li>
                    <a href="/categories/" title="CATEGORIES" target="">CATEGORIES</a>
                </li>
                
                <li>
                    <a href="/open-source/" title="OPEN-SOURCE" target="">OPEN-SOURCE</a>
                </li>
                
                <li>
                    <a href="/wiki/" title="WIKI" target="">WIKI</a>
                </li>
                
                <li>
                    <a href="/links/" title="LINKS" target="">LINKS</a>
                </li>
                
                <li>
                    <a href="/about/" title="ABOUT" target="">ABOUT</a>
                </li>
                
                <li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <!-- / footer -->
    <script src="https://zmatsh.b0.upaiyun.com/assets/vendor/share.js/dist/js/share.min.js"></script>
    <script src="https://zmatsh.b0.upaiyun.com/assets/js/geopattern.js"></script>
    <script src="https://zmatsh.b0.upaiyun.com/assets/js/prism.js"></script>
    <link rel="stylesheet" href="https://zmatsh.b0.upaiyun.com/assets/css/globals/prism.css">
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>
    
    <div style="display:none">
      <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-80669434-1', 'auto');
        ga('send', 'pageview');

      </script>
    </div>
    
</body>
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>
</html>
