<h1 id="apache-geode-install">Apache geode install</h1>

<ul>
  <li>下载二进制文件</li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>wget http://apache.osuosl.org/geode/1.3.0/apache-geode-1.3.0.zip

</code></pre>
</div>

<ul>
  <li>复制到其他多个节点进行解压</li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>
unzip apache-geode-1.3.0.zip

</code></pre>
</div>

<ul>
  <li>
    <p>修改为集群模式（注意：支持的模式有分组模式，集群模式，集群+分组模式）</p>
  </li>
  <li>
    <p>二进制文件所在 <code class="highlighter-rouge">/home/hadmin/geode/</code></p>
  </li>
  <li>
    <p>创建相应的配置文件路径</p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>mkdir -p cluster_config/cluster
</code></pre>
</div>

<ul>
  <li>将<code class="highlighter-rouge">/home/hadmin/geode/config</code>内的文件复制到刚才创建的目录内，并且进行相应的修改文件名。</li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>
gemfire.properties	mv -&gt; cluster.properties

cache.xml	mv -&gt; cluster.xml

</code></pre>
</div>

<ul>
  <li>结果</li>
</ul>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>
<span class="o">[</span>root@dscn022 geode]# ls cluster_config/cluster/
cluster.properties  cluster.xml

</code></pre>
</div>

<ul>
  <li>
    <p>启动主节点 locator</p>
  </li>
  <li>
    <p>其他节点 connect –locator=10.11.0.224[10334]</p>
  </li>
</ul>

<div class="language-text highlighter-rouge"><pre class="highlight"><code>
create region --name=example-region --type=REPLICATE_PERSISTENT

start server --name=server1 --server-port=40411
start server --name=server2 --server-port=40412
start server --name=server3 --server-port=40413
start server --name=server4 --server-port=40414
start server --name=server5 --server-port=40415

query --query=" SELECT  * FROM /example-region h WHERE h.hoursPerWeek &lt; 40 "



locator 定位器，相当于master-slave中的master，或者zookeeper，主要用于管理集群，和链接不同的server。

　　gfsh&gt; start locator --name=locator1

server 服务器，可以部署在同一台机器，也可以部署在不同机器。在不同的机器上启动时，需要先用connect连接已启动的locator

　　connect --locator=ip[locator的port]

　　start server --name=server1

region 数据区域，或者叫表，是数据存储的基本单位，以下创建一个在集群内自动复制的，自动持久化的region，并持久化数据

　　create region --name=regionA --type=REPLICATE_PERSISTENT

　　put --region=regionA --key="1" --value="one"

OQL 类SQL的脚本，用来查数

　　query --query="select * from /regionA"

以上命令的执行默认是以集群为范围的，如果要单机执行，需要修改apache-geode\config\gemfire.properties文件中的属性：enable-cluster-configuration=true，改为false。

</code></pre>
</div>
